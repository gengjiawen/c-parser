(function(){let e=function(e){return e[e.IntLiteral=0]=`IntLiteral`,e[e.UIntLiteral=1]=`UIntLiteral`,e[e.LongLiteral=2]=`LongLiteral`,e[e.ULongLiteral=3]=`ULongLiteral`,e[e.LongLongLiteral=4]=`LongLongLiteral`,e[e.ULongLongLiteral=5]=`ULongLongLiteral`,e[e.FloatLiteral=6]=`FloatLiteral`,e[e.FloatLiteralF32=7]=`FloatLiteralF32`,e[e.FloatLiteralLongDouble=8]=`FloatLiteralLongDouble`,e[e.ImaginaryLiteral=9]=`ImaginaryLiteral`,e[e.ImaginaryLiteralF32=10]=`ImaginaryLiteralF32`,e[e.ImaginaryLiteralLongDouble=11]=`ImaginaryLiteralLongDouble`,e[e.StringLiteral=12]=`StringLiteral`,e[e.WideStringLiteral=13]=`WideStringLiteral`,e[e.Char16StringLiteral=14]=`Char16StringLiteral`,e[e.CharLiteral=15]=`CharLiteral`,e[e.Identifier=16]=`Identifier`,e[e.Auto=17]=`Auto`,e[e.Break=18]=`Break`,e[e.Case=19]=`Case`,e[e.Char=20]=`Char`,e[e.Const=21]=`Const`,e[e.Continue=22]=`Continue`,e[e.Default=23]=`Default`,e[e.Do=24]=`Do`,e[e.Double=25]=`Double`,e[e.Else=26]=`Else`,e[e.Enum=27]=`Enum`,e[e.Extern=28]=`Extern`,e[e.Float=29]=`Float`,e[e.For=30]=`For`,e[e.Goto=31]=`Goto`,e[e.If=32]=`If`,e[e.Inline=33]=`Inline`,e[e.Int=34]=`Int`,e[e.Long=35]=`Long`,e[e.Register=36]=`Register`,e[e.Restrict=37]=`Restrict`,e[e.Return=38]=`Return`,e[e.Short=39]=`Short`,e[e.Signed=40]=`Signed`,e[e.Sizeof=41]=`Sizeof`,e[e.Static=42]=`Static`,e[e.Struct=43]=`Struct`,e[e.Switch=44]=`Switch`,e[e.Typedef=45]=`Typedef`,e[e.Union=46]=`Union`,e[e.Unsigned=47]=`Unsigned`,e[e.Void=48]=`Void`,e[e.Volatile=49]=`Volatile`,e[e.While=50]=`While`,e[e.Alignas=51]=`Alignas`,e[e.Alignof=52]=`Alignof`,e[e.Atomic=53]=`Atomic`,e[e.Bool=54]=`Bool`,e[e.Complex=55]=`Complex`,e[e.Generic=56]=`Generic`,e[e.Imaginary=57]=`Imaginary`,e[e.Noreturn=58]=`Noreturn`,e[e.StaticAssert=59]=`StaticAssert`,e[e.ThreadLocal=60]=`ThreadLocal`,e[e.Typeof=61]=`Typeof`,e[e.Asm=62]=`Asm`,e[e.Attribute=63]=`Attribute`,e[e.Extension=64]=`Extension`,e[e.Builtin=65]=`Builtin`,e[e.BuiltinVaArg=66]=`BuiltinVaArg`,e[e.BuiltinTypesCompatibleP=67]=`BuiltinTypesCompatibleP`,e[e.Int128=68]=`Int128`,e[e.UInt128=69]=`UInt128`,e[e.RealPart=70]=`RealPart`,e[e.ImagPart=71]=`ImagPart`,e[e.AutoType=72]=`AutoType`,e[e.GnuAlignof=73]=`GnuAlignof`,e[e.GnuLabel=74]=`GnuLabel`,e[e.SegGs=75]=`SegGs`,e[e.SegFs=76]=`SegFs`,e[e.PragmaPackSet=77]=`PragmaPackSet`,e[e.PragmaPackPush=78]=`PragmaPackPush`,e[e.PragmaPackPushOnly=79]=`PragmaPackPushOnly`,e[e.PragmaPackPop=80]=`PragmaPackPop`,e[e.PragmaPackReset=81]=`PragmaPackReset`,e[e.PragmaVisibilityPush=82]=`PragmaVisibilityPush`,e[e.PragmaVisibilityPop=83]=`PragmaVisibilityPop`,e[e.LParen=84]=`LParen`,e[e.RParen=85]=`RParen`,e[e.LBrace=86]=`LBrace`,e[e.RBrace=87]=`RBrace`,e[e.LBracket=88]=`LBracket`,e[e.RBracket=89]=`RBracket`,e[e.Semicolon=90]=`Semicolon`,e[e.Comma=91]=`Comma`,e[e.Dot=92]=`Dot`,e[e.Arrow=93]=`Arrow`,e[e.Ellipsis=94]=`Ellipsis`,e[e.Plus=95]=`Plus`,e[e.Minus=96]=`Minus`,e[e.Star=97]=`Star`,e[e.Slash=98]=`Slash`,e[e.Percent=99]=`Percent`,e[e.Amp=100]=`Amp`,e[e.Pipe=101]=`Pipe`,e[e.Caret=102]=`Caret`,e[e.Tilde=103]=`Tilde`,e[e.Bang=104]=`Bang`,e[e.Assign=105]=`Assign`,e[e.Less=106]=`Less`,e[e.Greater=107]=`Greater`,e[e.Question=108]=`Question`,e[e.Colon=109]=`Colon`,e[e.PlusPlus=110]=`PlusPlus`,e[e.MinusMinus=111]=`MinusMinus`,e[e.PlusAssign=112]=`PlusAssign`,e[e.MinusAssign=113]=`MinusAssign`,e[e.StarAssign=114]=`StarAssign`,e[e.SlashAssign=115]=`SlashAssign`,e[e.PercentAssign=116]=`PercentAssign`,e[e.AmpAssign=117]=`AmpAssign`,e[e.PipeAssign=118]=`PipeAssign`,e[e.CaretAssign=119]=`CaretAssign`,e[e.LessLess=120]=`LessLess`,e[e.GreaterGreater=121]=`GreaterGreater`,e[e.LessLessAssign=122]=`LessLessAssign`,e[e.GreaterGreaterAssign=123]=`GreaterGreaterAssign`,e[e.EqualEqual=124]=`EqualEqual`,e[e.BangEqual=125]=`BangEqual`,e[e.LessEqual=126]=`LessEqual`,e[e.GreaterEqual=127]=`GreaterEqual`,e[e.AmpAmp=128]=`AmpAmp`,e[e.PipePipe=129]=`PipePipe`,e[e.Hash=130]=`Hash`,e[e.HashHash=131]=`HashHash`,e[e.Eof=132]=`Eof`,e}({});function t(){return{start:0,end:0}}function n(t,n){let r=t.length;if(r<2||r>17&&r!==28)return;let i=t.charCodeAt(0);if(!(i!==95&&i!==97&&i!==98&&i!==99&&i!==100&&i!==101&&i!==102&&i!==103&&i!==105&&i!==108&&i!==114&&i!==115&&i!==116&&i!==117&&i!==118&&i!==119))switch(t){case`auto`:return e.Auto;case`break`:return e.Break;case`case`:return e.Case;case`char`:return e.Char;case`const`:return e.Const;case`continue`:return e.Continue;case`default`:return e.Default;case`do`:return e.Do;case`double`:return e.Double;case`else`:return e.Else;case`enum`:return e.Enum;case`extern`:return e.Extern;case`float`:return e.Float;case`for`:return e.For;case`goto`:return e.Goto;case`if`:return e.If;case`inline`:return e.Inline;case`int`:return e.Int;case`long`:return e.Long;case`register`:return e.Register;case`restrict`:return e.Restrict;case`return`:return e.Return;case`short`:return e.Short;case`signed`:return e.Signed;case`sizeof`:return e.Sizeof;case`static`:return e.Static;case`struct`:return e.Struct;case`switch`:return e.Switch;case`typedef`:return e.Typedef;case`union`:return e.Union;case`unsigned`:return e.Unsigned;case`void`:return e.Void;case`volatile`:case`__volatile__`:case`__volatile`:return e.Volatile;case`__const`:case`__const__`:return e.Const;case`__inline`:case`__inline__`:return e.Inline;case`__restrict`:case`__restrict__`:return e.Restrict;case`__signed__`:return e.Signed;case`while`:return e.While;case`_Alignas`:return e.Alignas;case`_Alignof`:return e.Alignof;case`_Atomic`:return e.Atomic;case`_Bool`:return e.Bool;case`_Complex`:case`__complex__`:case`__complex`:return e.Complex;case`_Generic`:return e.Generic;case`_Imaginary`:return e.Imaginary;case`_Noreturn`:case`__noreturn__`:return e.Noreturn;case`_Static_assert`:case`static_assert`:return e.StaticAssert;case`_Thread_local`:case`__thread`:return e.ThreadLocal;case`typeof`:return n?e.Typeof:void 0;case`__typeof__`:case`__typeof`:return e.Typeof;case`asm`:return n?e.Asm:void 0;case`__asm__`:case`__asm`:return e.Asm;case`__attribute__`:case`__attribute`:return e.Attribute;case`__extension__`:return e.Extension;case`__builtin_va_list`:return e.Builtin;case`__builtin_va_arg`:return e.BuiltinVaArg;case`__builtin_types_compatible_p`:return e.BuiltinTypesCompatibleP;case`__int128`:case`__int128_t`:return e.Int128;case`__uint128_t`:return e.UInt128;case`__real__`:case`__real`:return e.RealPart;case`__imag__`:case`__imag`:return e.ImagPart;case`__auto_type`:return e.AutoType;case`__alignof`:case`__alignof__`:return e.GnuAlignof;case`__label__`:return e.GnuLabel;case`__seg_gs`:return e.SegGs;case`__seg_fs`:return e.SegFs;default:return}}let r=2**53-1;function i(e){return e>=48&&e<=57}function a(e){return e>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70}function o(e){return e>=97&&e<=122||e>=65&&e<=90}function s(e){return o(e)||i(e)}function c(e){return e===95||e===36||o(e)}function l(e){return e===95||e===36||s(e)}function u(e){return e===32||e===9||e===10||e===13||e===12||e===11}function d(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-97+10:e>=65&&e<=70?e-65+10:0}var f=class t{constructor(e,t=!0){this.src=e,this.len=e.length,this.pos=0,this.gnuExtensions=t}scan(){let t=[];for(;;){let n=this.nextToken();if(t.push(n),n.kind===e.Eof)break}return t}ch(){return this.src.charCodeAt(this.pos)}chAt(e){return this.src.charCodeAt(e)}nextToken(){if(this.skipWhitespaceAndComments(),this.pos>=this.len)return{kind:e.Eof,start:this.pos,end:this.pos};let t=this.pos,n=this.ch();return i(n)||n===46&&this.pos+1<this.len&&i(this.chAt(this.pos+1))?this.lexNumber(t):n===34?this.lexString(t):n===39?this.lexChar(t):c(n)?this.lexIdentifier(t):this.lexPunctuation(t)}skipWhitespaceAndComments(){for(;;){for(;this.pos<this.len&&u(this.ch());)this.pos++;if(this.pos>=this.len)return;if(this.ch()===35&&this.isLineMarker()){for(;this.pos<this.len&&this.ch()!==10;)this.pos++;continue}if(this.pos+1<this.len&&this.ch()===47&&this.chAt(this.pos+1)===47){for(;this.pos<this.len&&this.ch()!==10;)this.pos++;continue}if(this.pos+1<this.len&&this.ch()===47&&this.chAt(this.pos+1)===42){for(this.pos+=2;this.pos+1<this.len;){if(this.ch()===42&&this.chAt(this.pos+1)===47){this.pos+=2;break}this.pos++}continue}break}}isLineMarker(){if(this.pos>=this.len||this.ch()!==35||this.pos>0&&this.chAt(this.pos-1)!==10)return!1;let e=this.pos+1;for(;e<this.len&&this.chAt(e)===32;)e++;return e<this.len&&i(this.chAt(e))}lexNumber(e){if(this.pos+1<this.len&&this.ch()===48&&(this.chAt(this.pos+1)===120||this.chAt(this.pos+1)===88))return this.lexHexNumber(e);if(this.pos+1<this.len&&this.ch()===48&&(this.chAt(this.pos+1)===98||this.chAt(this.pos+1)===66))return this.lexBinaryNumber(e);let t=this.lexOctalNumber(e);return t===null?this.lexDecimalNumber(e):t}lexHexNumber(e){this.pos+=2;let t=this.pos;for(;this.pos<this.len&&a(this.ch());)this.pos++;let n=this.pos<this.len&&this.ch()===46,r=!1;if(n){let e=this.pos+1;for(;e<this.len&&a(this.chAt(e));)e++;r=e<this.len&&(this.chAt(e)===112||this.chAt(e)===80)}let i=this.pos<this.len&&(this.ch()===112||this.ch()===80);if(n&&r||i)return this.lexHexFloat(e,t,n);let o=this.src.substring(t,this.pos),s=o.length>0?p(o):0n;return this.finishIntLiteral(s,!0,e)}lexHexFloat(t,n,r){let o=this.src.substring(n,this.pos),s=``;if(r){this.pos++;let e=this.pos;for(;this.pos<this.len&&a(this.ch());)this.pos++;s=this.src.substring(e,this.pos)}let c=0;if(this.pos<this.len&&(this.ch()===112||this.ch()===80)){this.pos++;let e=!1;this.pos<this.len&&this.ch()===45?(this.pos++,e=!0):this.pos<this.len&&this.ch()===43&&this.pos++;let t=this.pos;for(;this.pos<this.len&&i(this.ch());)this.pos++;let n=this.src.substring(t,this.pos),r=parseInt(n,10)||0;c=e?-r:r}let l=o.length>0?parseInt(o,16):0,u=0;s.length>0&&(u=parseInt(s,16)/16**s.length);let d=(l+u)*2**c,f=this.parseSimpleFloatSuffix();return f===1?{kind:e.FloatLiteralF32,start:t,end:this.pos,value:d}:f===2?{kind:e.FloatLiteralLongDouble,start:t,end:this.pos,value:d}:{kind:e.FloatLiteral,start:t,end:this.pos,value:d}}parseSimpleFloatSuffix(){return this.pos<this.len&&(this.ch()===102||this.ch()===70)?(this.pos++,1):this.pos<this.len&&(this.ch()===108||this.ch()===76)?(this.pos++,2):0}lexBinaryNumber(e){this.pos+=2;let t=this.pos;for(;this.pos<this.len&&(this.ch()===48||this.ch()===49);)this.pos++;let n=this.src.substring(t,this.pos),r=n.length>0?m(n):0n;return this.finishIntLiteral(r,!0,e)}lexOctalNumber(e){if(this.ch()!==48||this.pos+1>=this.len||!i(this.chAt(this.pos+1)))return null;let t=this.pos;this.pos++;let n=this.pos;for(;this.pos<this.len&&this.ch()>=48&&this.ch()<=55;)this.pos++;if(this.pos<this.len){let e=this.ch();if((e===46||e===101||e===69||e===56||e===57)&&!(e===46&&this.pos+2<this.len&&this.chAt(this.pos+1)===46&&this.chAt(this.pos+2)===46))return this.pos=t,null}let r=this.src.substring(n,this.pos),a=r.length>0?h(r):0n;return this.finishIntLiteral(a,!0,e)}lexDecimalNumber(e){let t=!1;for(;this.pos<this.len&&i(this.ch());)this.pos++;if(this.pos<this.len&&this.ch()===46&&!(this.pos+2<this.len&&this.chAt(this.pos+1)===46&&this.chAt(this.pos+2)===46))for(t=!0,this.pos++;this.pos<this.len&&i(this.ch());)this.pos++;if(this.pos<this.len&&(this.ch()===101||this.ch()===69))for(t=!0,this.pos++,this.pos<this.len&&(this.ch()===43||this.ch()===45)&&this.pos++;this.pos<this.len&&i(this.ch());)this.pos++;let n=this.pos;if(t){let{floatKind:t,isImaginary:r}=this.parseFloatSuffix(),i=this.src.substring(e,n);return this.makeFloatToken(i,t,r,e)}let r=g(this.src.substring(e,n));return this.finishIntLiteral(r,!1,e)}parseFloatSuffix(){let e=!1,t;return this.pos<this.len&&(this.ch()===102||this.ch()===70)?(this.pos++,this.pos<this.len&&(this.ch()===105||this.ch()===73)&&(this.pos++,e=!0),t=1):this.pos<this.len&&(this.ch()===108||this.ch()===76)?(this.pos++,this.pos<this.len&&(this.ch()===105||this.ch()===73)&&(this.pos++,e=!0),t=2):this.pos<this.len&&(this.ch()===105||this.ch()===73)?(this.pos++,e=!0,this.pos<this.len&&(this.ch()===102||this.ch()===70)?(this.pos++,t=1):this.pos<this.len&&(this.ch()===108||this.ch()===76)?(this.pos++,t=2):t=0):t=0,!e&&this.pos<this.len&&(this.ch()===106||this.ch()===74)&&(this.pos++,e=!0),{floatKind:t,isImaginary:e}}makeFloatToken(t,n,r,i){let a=parseFloat(t)||0;return r?n===1?{kind:e.ImaginaryLiteralF32,start:i,end:this.pos,value:a}:n===2?{kind:e.ImaginaryLiteralLongDouble,start:i,end:this.pos,value:a}:{kind:e.ImaginaryLiteral,start:i,end:this.pos,value:a}:n===1?{kind:e.FloatLiteralF32,start:i,end:this.pos,value:a}:n===2?{kind:e.FloatLiteralLongDouble,start:i,end:this.pos,value:a}:{kind:e.FloatLiteral,start:i,end:this.pos,value:a}}parseIntSuffix(){let e=!1;if(this.pos<this.len&&(this.ch()===105||this.ch()===73)){let e=this.pos+1<this.len?this.chAt(this.pos+1):0;if(!s(e)&&e!==95)return this.pos++,{isUnsigned:!1,isLong:!1,isLongLong:!1,isImaginary:!0}}let t=!1,n=!1,r=!1;for(;;)if(this.pos<this.len&&(this.ch()===117||this.ch()===85))t=!0,this.pos++;else if(this.pos<this.len&&(this.ch()===108||this.ch()===76))this.pos++,this.pos<this.len&&(this.ch()===108||this.ch()===76)?(r=!0,this.pos++):n=!0;else break;if(this.pos<this.len&&(this.ch()===105||this.ch()===73||this.ch()===106||this.ch()===74)){let t=this.pos+1<this.len?this.chAt(this.pos+1):0;!s(t)&&t!==95&&(this.pos++,e=!0)}return{isUnsigned:t,isLong:n,isLongLong:r,isImaginary:e}}finishIntLiteral(t,n,r){let{isUnsigned:i,isLong:a,isLongLong:o,isImaginary:s}=this.parseIntSuffix();return s?this.makeToken(e.ImaginaryLiteral,r,Number(t)):this.makeIntToken(t,i,a,o,n,r)}makeIntToken(t,n,r,i,a,o){let s=2147483647n,c=4294967295n,l=9223372036854775807n;return n&&i?this.makeIntOrBigToken(e.ULongLongLiteral,o,t):n&&r?this.makeIntOrBigToken(e.ULongLiteral,o,t):n?t>c?this.makeIntOrBigToken(e.ULongLiteral,o,t):this.makeIntOrBigToken(e.UIntLiteral,o,t):i?a&&t>l?this.makeIntOrBigToken(e.ULongLongLiteral,o,t):this.makeIntOrBigToken(e.LongLongLiteral,o,t):r?a&&t>l?this.makeIntOrBigToken(e.ULongLiteral,o,t):this.makeIntOrBigToken(e.LongLiteral,o,t):a?t<=s?this.makeIntOrBigToken(e.IntLiteral,o,t):t<=c?this.makeIntOrBigToken(e.UIntLiteral,o,t):t<=l?this.makeIntOrBigToken(e.LongLiteral,o,t):this.makeIntOrBigToken(e.ULongLiteral,o,t):t>l?this.makeIntOrBigToken(e.ULongLiteral,o,t):t<=s?this.makeIntOrBigToken(e.IntLiteral,o,t):this.makeIntOrBigToken(e.LongLiteral,o,t)}makeIntOrBigToken(e,t,n){return n<=BigInt(r)?{kind:e,start:t,end:this.pos,value:Number(n)}:{kind:e,start:t,end:this.pos,bigValue:n}}makeToken(e,t,n){return n===void 0?{kind:e,start:t,end:this.pos}:{kind:e,start:t,end:this.pos,value:n}}lexString(t){this.pos++;let n=``;for(;this.pos<this.len&&this.ch()!==34;)if(this.ch()===92){if(this.pos++,this.pos<this.len){let e=this.lexEscapeChar();if(e.codePointAt(0)>255)for(let t=0;t<e.length;t++){let r=e.codePointAt(t);r<128?n+=String.fromCharCode(r):r<2048?(n+=String.fromCharCode(192|r>>6),n+=String.fromCharCode(128|r&63)):r<65536?(n+=String.fromCharCode(224|r>>12),n+=String.fromCharCode(128|r>>6&63),n+=String.fromCharCode(128|r&63)):(n+=String.fromCharCode(240|r>>18),n+=String.fromCharCode(128|r>>12&63),n+=String.fromCharCode(128|r>>6&63),n+=String.fromCharCode(128|r&63)),r>65535&&t++}else n+=e}}else n+=this.src[this.pos],this.pos++;return this.pos<this.len&&this.pos++,{kind:e.StringLiteral,start:t,end:this.pos,value:n}}lexWideString(t){this.pos++;let n=``;for(;this.pos<this.len&&this.ch()!==34;)this.ch()===92?(this.pos++,this.pos<this.len&&(n+=this.lexEscapeChar())):(n+=this.src[this.pos],this.pos++);return this.pos<this.len&&this.pos++,{kind:e.WideStringLiteral,start:t,end:this.pos,value:n}}lexChar16String(t){this.pos++;let n=``;for(;this.pos<this.len&&this.ch()!==34;)this.ch()===92?(this.pos++,this.pos<this.len&&(n+=this.lexEscapeChar())):(n+=this.src[this.pos],this.pos++);return this.pos<this.len&&this.pos++,{kind:e.Char16StringLiteral,start:t,end:this.pos,value:n}}lexChar(t){this.pos++;let n=0,r=0;for(;this.pos<this.len&&this.ch()!==39;){let e;this.ch()===92?(this.pos++,e=this.lexEscapeChar()):(e=this.src[this.pos],this.pos++);let t=e.codePointAt(0);if(t>255){let e=[];t<2048?e.push(192|t>>6,128|t&63):t<65536?e.push(224|t>>12,128|t>>6&63,128|t&63):e.push(240|t>>18,128|t>>12&63,128|t>>6&63,128|t&63);for(let t of e)n=n<<8|t,r++}else n=n<<8|t&255,r++}if(this.pos<this.len&&this.ch()===39&&this.pos++,r<=1){let r=n===0?`\0`:String.fromCharCode(n&255);return{kind:e.CharLiteral,start:t,end:this.pos,value:r}}return{kind:e.IntLiteral,start:t,end:this.pos,value:n}}lexWideChar(t){this.pos++;let n=0;for(this.pos<this.len&&this.ch()!==39&&(this.ch()===92?(this.pos++,n=this.lexEscapeChar().codePointAt(0)):(n=this.src.codePointAt(this.pos),this.pos+=n>65535?2:1));this.pos<this.len&&this.ch()!==39;)this.pos++;return this.pos<this.len&&this.ch()===39&&this.pos++,{kind:e.IntLiteral,start:t,end:this.pos,value:n}}lexEscapeChar(){if(this.pos>=this.len)return`\0`;let e=this.ch();switch(this.pos++,e){case 110:return`
`;case 116:return`	`;case 114:return`\r`;case 92:return`\\`;case 39:return`'`;case 34:return`"`;case 97:return`\x07`;case 98:return`\b`;case 101:case 69:return`\x1B`;case 102:return`\f`;case 118:return`\v`;case 120:{let e=0;for(;this.pos<this.len&&a(this.ch());)e=e*16+d(this.ch()),this.pos++;return String.fromCharCode(e&255)}case 117:return this.lexUnicodeEscape(4);case 85:return this.lexUnicodeEscape(8);default:if(e>=48&&e<=55){let t=e-48;for(let e=0;e<2&&this.pos<this.len&&this.ch()>=48&&this.ch()<=55;e++)t=t*8+(this.ch()-48),this.pos++;return String.fromCharCode(t&255)}return String.fromCharCode(e)}}lexUnicodeEscape(e){let t=0;for(let n=0;n<e&&this.pos<this.len&&a(this.ch());n++)t=t*16+d(this.ch()),this.pos++;try{return String.fromCodePoint(t)}catch{return`ï¿½`}}lexIdentifier(r){for(;this.pos<this.len&&l(this.ch());)this.pos++;if(this.pos<this.len){let e=this.pos-r,t=this.ch();if(t===39||t===34){let n=!1;if(e===1){let e=this.chAt(r);n=e===76||e===117||e===85}else e===2&&(n=this.chAt(r)===117&&this.chAt(r+1)===56);if(n){if(t===39)return this.lexWideChar(r);let n=this.chAt(r);return e===1&&(n===76||n===85)?this.lexWideString(r):e===1&&n===117?this.lexChar16String(r):this.lexString(r)}}}let i=this.src.substring(r,this.pos),a=t.tryPragmaPackToken(i);if(a!==null)return{kind:a.kind,start:r,end:this.pos,value:a.value};let o=t.tryPragmaVisibilityToken(i);if(o!==null)return{kind:o.kind,start:r,end:this.pos,value:o.value};let s=n(i,this.gnuExtensions);return s===void 0?{kind:e.Identifier,start:r,end:this.pos,value:i}:{kind:s,start:r,end:this.pos}}static tryPragmaPackToken(t){if(!t.startsWith(`__ccc_pack_`))return null;let n=t.substring(11);if(n===`pop`)return{kind:e.PragmaPackPop};if(n===`reset`)return{kind:e.PragmaPackReset};if(n===`push_only`)return{kind:e.PragmaPackPushOnly};if(n.startsWith(`set_`)){let t=parseInt(n.substring(4),10);if(!isNaN(t))return{kind:e.PragmaPackSet,value:t}}if(n.startsWith(`push_`)){let t=parseInt(n.substring(5),10);if(!isNaN(t))return{kind:e.PragmaPackPush,value:t}}return null}static tryPragmaVisibilityToken(t){if(!t.startsWith(`__ccc_visibility_`))return null;let n=t.substring(17);if(n===`pop`)return{kind:e.PragmaVisibilityPop};if(n.startsWith(`push_`)){let t=n.substring(5);if(t===`hidden`||t===`default`||t===`protected`||t===`internal`)return{kind:e.PragmaVisibilityPush,value:t}}return null}lexPunctuation(t){let n=this.ch();switch(this.pos++,n){case 40:return{kind:e.LParen,start:t,end:this.pos};case 41:return{kind:e.RParen,start:t,end:this.pos};case 123:return{kind:e.LBrace,start:t,end:this.pos};case 125:return{kind:e.RBrace,start:t,end:this.pos};case 91:return{kind:e.LBracket,start:t,end:this.pos};case 93:return{kind:e.RBracket,start:t,end:this.pos};case 59:return{kind:e.Semicolon,start:t,end:this.pos};case 44:return{kind:e.Comma,start:t,end:this.pos};case 126:return{kind:e.Tilde,start:t,end:this.pos};case 63:return{kind:e.Question,start:t,end:this.pos};case 58:return{kind:e.Colon,start:t,end:this.pos};case 35:return this.pos<this.len&&this.ch()===35?(this.pos++,{kind:e.HashHash,start:t,end:this.pos}):{kind:e.Hash,start:t,end:this.pos};case 46:return this.pos+1<this.len&&this.ch()===46&&this.chAt(this.pos+1)===46?(this.pos+=2,{kind:e.Ellipsis,start:t,end:this.pos}):{kind:e.Dot,start:t,end:this.pos};case 43:if(this.pos<this.len){if(this.ch()===43)return this.pos++,{kind:e.PlusPlus,start:t,end:this.pos};if(this.ch()===61)return this.pos++,{kind:e.PlusAssign,start:t,end:this.pos}}return{kind:e.Plus,start:t,end:this.pos};case 45:if(this.pos<this.len){if(this.ch()===45)return this.pos++,{kind:e.MinusMinus,start:t,end:this.pos};if(this.ch()===61)return this.pos++,{kind:e.MinusAssign,start:t,end:this.pos};if(this.ch()===62)return this.pos++,{kind:e.Arrow,start:t,end:this.pos}}return{kind:e.Minus,start:t,end:this.pos};case 42:return this.pos<this.len&&this.ch()===61?(this.pos++,{kind:e.StarAssign,start:t,end:this.pos}):{kind:e.Star,start:t,end:this.pos};case 47:return this.pos<this.len&&this.ch()===61?(this.pos++,{kind:e.SlashAssign,start:t,end:this.pos}):{kind:e.Slash,start:t,end:this.pos};case 37:return this.pos<this.len&&this.ch()===61?(this.pos++,{kind:e.PercentAssign,start:t,end:this.pos}):{kind:e.Percent,start:t,end:this.pos};case 38:if(this.pos<this.len){if(this.ch()===38)return this.pos++,{kind:e.AmpAmp,start:t,end:this.pos};if(this.ch()===61)return this.pos++,{kind:e.AmpAssign,start:t,end:this.pos}}return{kind:e.Amp,start:t,end:this.pos};case 124:if(this.pos<this.len){if(this.ch()===124)return this.pos++,{kind:e.PipePipe,start:t,end:this.pos};if(this.ch()===61)return this.pos++,{kind:e.PipeAssign,start:t,end:this.pos}}return{kind:e.Pipe,start:t,end:this.pos};case 94:return this.pos<this.len&&this.ch()===61?(this.pos++,{kind:e.CaretAssign,start:t,end:this.pos}):{kind:e.Caret,start:t,end:this.pos};case 33:return this.pos<this.len&&this.ch()===61?(this.pos++,{kind:e.BangEqual,start:t,end:this.pos}):{kind:e.Bang,start:t,end:this.pos};case 61:return this.pos<this.len&&this.ch()===61?(this.pos++,{kind:e.EqualEqual,start:t,end:this.pos}):{kind:e.Assign,start:t,end:this.pos};case 60:if(this.pos<this.len){if(this.ch()===60)return this.pos++,this.pos<this.len&&this.ch()===61?(this.pos++,{kind:e.LessLessAssign,start:t,end:this.pos}):{kind:e.LessLess,start:t,end:this.pos};if(this.ch()===61)return this.pos++,{kind:e.LessEqual,start:t,end:this.pos}}return{kind:e.Less,start:t,end:this.pos};case 62:if(this.pos<this.len){if(this.ch()===62)return this.pos++,this.pos<this.len&&this.ch()===61?(this.pos++,{kind:e.GreaterGreaterAssign,start:t,end:this.pos}):{kind:e.GreaterGreater,start:t,end:this.pos};if(this.ch()===61)return this.pos++,{kind:e.GreaterEqual,start:t,end:this.pos}}return{kind:e.Greater,start:t,end:this.pos};default:return this.nextToken()}}};function p(e){if(e.length===0)return 0n;try{return BigInt(`0x`+e)}catch{return 0n}}function m(e){if(e.length===0)return 0n;try{return BigInt(`0b`+e)}catch{return 0n}}function h(e){if(e.length===0)return 0n;try{return BigInt(`0o`+e)}catch{return 0n}}function g(e){if(e.length===0)return 0n;try{return BigInt(e)}catch{return 0n}}let _=function(e){return e.QI=`QI`,e.HI=`HI`,e.SI=`SI`,e.DI=`DI`,e.TI=`TI`,e}({});function v(e,t){let n=t.type===`UnsignedIntType`||t.type===`UnsignedLongType`||t.type===`UnsignedLongLongType`||t.type===`UnsignedType`||t.type===`UnsignedCharType`||t.type===`UnsignedShortType`;switch(e){case _.QI:return n?{type:`UnsignedCharType`}:{type:`CharType`};case _.HI:return n?{type:`UnsignedShortType`}:{type:`ShortType`};case _.SI:return n?{type:`UnsignedIntType`}:{type:`IntType`};case _.DI:return n?{type:`UnsignedLongLongType`}:{type:`LongLongType`};case _.TI:return n?{type:`UnsignedInt128Type`}:{type:`Int128Type`}}}let y=1024,b=2048,x=4096,S=8192,C=16384,w=32768,T=65536,E=1<<17,D=1<<18;function O(){return{flags:0,parsingAddressSpace:`Default`,parsingAliasTarget:null,parsingVisibility:null,parsingSection:null,parsingCleanupFn:null,parsingSymver:null,parsingVectorSize:null,parsingExtVectorNelem:null,parsedAlignas:null,parsedAlignasType:null,parsedAlignmentSizeofType:null}}function k(e){let t=e;return t.startsWith(`__`)&&(t=t.slice(2)),t.endsWith(`__`)&&(t=t.slice(0,-2)),t.toLowerCase()}function A(t){return t.kind===e.Identifier&&typeof t.value==`string`?t.value:t.kind===e.Noreturn?`noreturn`:t.kind===e.Inline?`inline`:null}function j(t){for(let n of t)if((n.kind===e.StringLiteral||n.kind===e.WideStringLiteral||n.kind===e.Char16StringLiteral)&&typeof n.value==`string`)return n.value;return null}function M(e){for(let t of e){let e=A(t);if(e!==null)return e}return null}function N(t){for(let n of t)if(n.kind===e.IntLiteral||n.kind===e.UIntLiteral||n.kind===e.LongLiteral||n.kind===e.ULongLiteral||n.kind===e.LongLongLiteral||n.kind===e.ULongLongLiteral){if(typeof n.value==`number`)return n.value;if(typeof n.bigValue==`bigint`)return Number(n.bigValue)}return null}function P(e){if(e===null)return null;let t=e;switch(t.startsWith(`__`)&&(t=t.slice(2)),t.endsWith(`__`)&&(t=t.slice(0,-2)),t.toUpperCase()){case`QI`:return _.QI;case`HI`:return _.HI;case`SI`:return _.SI;case`DI`:return _.DI;case`TI`:return _.TI;default:return null}}var F=class n{constructor(e){this.tokens=e,this.pos=0,this.typedefs=n.builtinTypedefs(),this.shadowedTypedefs=new Set,this.attrs=O(),this.pragmaPackStack=[],this.pragmaPackAlign=null,this.pragmaVisibilityStack=[],this.pragmaDefaultVisibility=null,this.errorCount=0,this.enumConstants=new Map,this.unevaluableEnumConstants=new Set,this.structTagAlignments=new Map}static builtinTypedefs(){return new Set(`size_t.ssize_t.ptrdiff_t.wchar_t.wint_t.int8_t.int16_t.int32_t.int64_t.uint8_t.uint16_t.uint32_t.uint64_t.intptr_t.uintptr_t.intmax_t.uintmax_t.int_least8_t.int_least16_t.int_least32_t.int_least64_t.uint_least8_t.uint_least16_t.uint_least32_t.uint_least64_t.int_fast8_t.int_fast16_t.int_fast32_t.int_fast64_t.uint_fast8_t.uint_fast16_t.uint_fast32_t.uint_fast64_t.FILE.fpos_t.sig_atomic_t.time_t.clock_t.timer_t.clockid_t.off_t.pid_t.uid_t.gid_t.mode_t.dev_t.ino_t.nlink_t.blksize_t.blkcnt_t.ulong.ushort.uint.__u8.__u16.__u32.__u64.__s8.__s16.__s32.__s64.va_list.__builtin_va_list.__gnuc_va_list.locale_t.pthread_t.pthread_mutex_t.pthread_cond_t.pthread_key_t.pthread_attr_t.pthread_once_t.pthread_mutexattr_t.pthread_condattr_t.jmp_buf.sigjmp_buf.DIR.__Float32x4_t.__Float64x2_t.__SVFloat32_t.__SVFloat64_t.__SVBool_t.__SVInt8_t.__SVInt16_t.__SVInt32_t.__SVInt64_t.__SVUint8_t.__SVUint16_t.__SVUint32_t.__SVUint64_t.__SVFloat16_t`.split(`.`))}getAttrFlag(e){return(this.attrs.flags&e)!==0}setAttrFlag(e,t){t?this.attrs.flags|=e:this.attrs.flags&=~e}saveAttrFlags(){return this.attrs.flags}restoreAttrFlags(e){this.attrs.flags=e}atEof(){return this.pos>=this.tokens.length||this.tokens[this.pos].kind===e.Eof}peek(){return this.pos<this.tokens.length?this.tokens[this.pos].kind:e.Eof}peekToken(){return this.pos<this.tokens.length?this.tokens[this.pos]:{kind:e.Eof,start:0,end:0}}peekSpan(){if(this.pos<this.tokens.length){let e=this.tokens[this.pos];return{start:e.start,end:e.end}}return t()}peekValue(){if(this.pos<this.tokens.length)return this.tokens[this.pos].value}advance(){if(this.pos<this.tokens.length){let e=this.tokens[this.pos];return this.pos++,e}return this.tokens[this.tokens.length-1]}consumeIf(e){return this.peek()===e?(this.advance(),!0):!1}expect(e){if(this.peek()===e){let e=this.peekSpan();return this.advance(),e}let t=this.peekSpan();return this.emitError(`expected '${e}' before '${this.peek()}'`,t),t}expectAfter(e,t){if(this.peek()===e){let e=this.peekSpan();return this.advance(),e}let n=this.peekSpan();return this.emitError(`expected '${e}' ${t} before '${this.peek()}'`,n),n}expectContext(e,t){return this.expectAfter(e,t)}expectClosing(e,t){if(this.peek()===e){let e=this.peekSpan();return this.advance(),e}let n=this.peekSpan();return this.emitError(`expected '${e}' before '${this.peek()}'`,n),n}emitError(e,t){this.errorCount++}skipGccExtensions(){for(;this.peek()===e.Extension;)this.advance()}skipCvQualifiers(){for(;this.peek()===e.Const||this.peek()===e.Volatile||this.peek()===e.Restrict||this.peek()===e.SegGs||this.peek()===e.SegFs||this.peek()===e.Attribute||this.peek()===e.Extension;)this.peek()===e.SegGs?(this.advance(),this.attrs.parsingAddressSpace=`SegGs`):this.peek()===e.SegFs?(this.advance(),this.attrs.parsingAddressSpace=`SegFs`):this.peek()===e.Attribute?this.parseGccAttributes():this.advance()}skipArrayQualifiers(){for(;this.peek()===e.Const||this.peek()===e.Volatile||this.peek()===e.Restrict||this.peek()===e.Static;)this.advance()}skipLabelAttributes(){for(;this.peek()===e.Attribute;)this.parseGccAttributes();this.consumeIf(e.Semicolon)}skipBalancedParens(){if(this.peek()!==e.LParen)return;this.advance();let t=1;for(;t>0&&!this.atEof();)this.peek()===e.LParen?t++:this.peek()===e.RParen&&t--,t>0&&this.advance();this.consumeIf(e.RParen)}parseGccAttributes(){if(this.peek()!==e.Attribute)return[!1,null,null,!1];let t=!1,n=null,r=null,i=!1,a=e=>{n=n===null?e:Math.max(n,e)},o=()=>{if(!this.consumeIf(e.LParen))return[];let t=[],n=1;for(;n>0&&!this.atEof();){let r=this.advance();if(r.kind===e.LParen){n++,t.push(r);continue}if(r.kind===e.RParen){n--,n>0&&t.push(r);continue}t.push(r)}return t};for(;this.peek()===e.Attribute;)if(this.advance(),this.consumeIf(e.LParen)){if(!this.consumeIf(e.LParen)){let t=1;for(;t>0&&!this.atEof();){let n=this.advance();n.kind===e.LParen?t++:n.kind===e.RParen&&t--}continue}for(;!this.atEof();){if(this.peek()===e.RParen){this.advance();break}if(this.peek()===e.Comma){this.advance();continue}let n=A(this.peekToken());if(n===null){this.advance();continue}this.advance();let s=k(n),c=this.peek()===e.LParen?o():[];switch(s){case`packed`:t=!0;break;case`aligned`:{let e=N(c);e!==null&&a(e);break}case`mode`:case`vector_size`:if(s===`mode`){let e=P(M(c));e!==null&&(r=e)}else{let e=N(c);e!==null&&(this.attrs.parsingVectorSize=e)}break;case`ext_vector_type`:{let e=N(c);e!==null&&(this.attrs.parsingExtVectorNelem=e);break}case`common`:i=!0;break;case`transparent_union`:this.setAttrFlag(T,!0);break;case`constructor`:this.setAttrFlag(128,!0);break;case`destructor`:this.setAttrFlag(256,!0);break;case`weak`:this.setAttrFlag(512,!0);break;case`used`:this.setAttrFlag(y,!0);break;case`gnu_inline`:this.setAttrFlag(b,!0);break;case`always_inline`:this.setAttrFlag(x,!0);break;case`noinline`:this.setAttrFlag(S,!0);break;case`noreturn`:this.setAttrFlag(C,!0);break;case`error`:this.setAttrFlag(w,!0);break;case`fastcall`:this.setAttrFlag(E,!0);break;case`naked`:this.setAttrFlag(D,!0);break;case`alias`:{let e=j(c);e!==null&&(this.attrs.parsingAliasTarget=e);break}case`visibility`:{let e=j(c);e!==null&&(this.attrs.parsingVisibility=e);break}case`section`:{let e=j(c);e!==null&&(this.attrs.parsingSection=e);break}case`cleanup`:{let e=M(c);e!==null&&(this.attrs.parsingCleanupFn=e);break}case`symver`:{let e=j(c);e!==null&&(this.attrs.parsingSymver=e);break}default:break}}this.consumeIf(e.RParen)}return[t,n,r,i]}parseAlignasArgument(){if(this.peek()!==e.LParen)return null;if(this.peekSpan(),this.advance(),this.peek()===e.RParen)return this.advance(),null;let t=1;for(;t>0&&!this.atEof();)this.peek()===e.LParen?t++:this.peek()===e.RParen&&t--,t>0&&this.advance();return this.consumeIf(e.RParen),null}isTypeSpecifier(){switch(this.peek()){case e.Void:case e.Char:case e.Short:case e.Int:case e.Long:case e.Float:case e.Double:case e.Signed:case e.Unsigned:case e.Struct:case e.Union:case e.Enum:case e.Typeof:case e.Bool:case e.Complex:case e.Atomic:case e.AutoType:case e.Int128:case e.UInt128:case e.Builtin:case e.Const:case e.Volatile:case e.Restrict:case e.Static:case e.Extern:case e.Typedef:case e.Register:case e.Auto:case e.Inline:case e.Noreturn:case e.ThreadLocal:case e.Attribute:case e.Extension:case e.Alignas:case e.SegGs:case e.SegFs:return!0;case e.Identifier:{let e=this.peekValue();return typeof e==`string`?this.typedefs.has(e)&&!this.shadowedTypedefs.has(e):!1}default:return!1}}isTypedefLabel(){return this.peek()===e.Identifier?this.pos+1<this.tokens.length&&this.tokens[this.pos+1].kind===e.Colon:!1}handlePragmaPackToken(){let t=this.peek();return t===e.PragmaPackSet||t===e.PragmaPackPush||t===e.PragmaPackPushOnly||t===e.PragmaPackPop||t===e.PragmaPackReset?(this.advance(),!0):!1}handlePragmaVisibilityToken(){let t=this.peek();return t===e.PragmaVisibilityPush||t===e.PragmaVisibilityPop?(this.advance(),!0):!1}parseStaticAssert(){let t=this.peekSpan();this.advance();let n=t.end;if(this.peek()===e.LParen){let e=this.peekSpan();this.skipBalancedParens(),n=e.end}if(this.peek()===e.Semicolon){let e=this.peekSpan();this.advance(),n=e.end}return{start:t.start,end:n}}parseLocalDeclaration(){for(;this.peek()!==e.Semicolon&&!this.atEof();)this.advance();return this.consumeIf(e.Semicolon),null}parseExpr(){return this.parseAssignmentExpr()}parseAssignmentExpr(){return this.parsePrimaryExpr()}parsePrimaryExpr(){let t=this.peekSpan(),n=this.advance(),r={start:{line:1,column:0},end:{line:1,column:0}};switch(n.kind){case e.IntLiteral:return{type:`IntLiteral`,value:n.value??0,start:t.start,end:t.end,loc:r};case e.Identifier:return{type:`Identifier`,name:n.value??``,start:t.start,end:t.end,loc:r};case e.StringLiteral:return{type:`StringLiteral`,value:n.value??``,start:t.start,end:t.end,loc:r};default:return{type:`IntLiteral`,value:0,start:t.start,end:t.end,loc:r}}}parseParamList(){let t=[],n=!1;if(this.peek()!==e.LParen)return[t,n];for(this.advance();this.peek()!==e.RParen&&!this.atEof();){if(this.peek()===e.Ellipsis){this.advance(),n=!0;break}for(;this.peek()!==e.Comma&&this.peek()!==e.RParen&&!this.atEof();)this.advance();this.consumeIf(e.Comma)}return this.consumeIf(e.RParen),[t,n]}parseDeclaratorWithAttrs(){let t=null,n=[];for(;this.consumeIf(e.Star);)n.push({kind:`Pointer`}),this.skipCvQualifiers();return this.peek()===e.Identifier&&(t=this.peekValue()??null,this.advance()),this.parseGccAttributes(),[t,n,null,!1,null,!1]}tryParseParenAbstractDeclarator(){let t=this.pos;this.advance();let n=0;for(;this.peek()===e.Star;)this.advance(),n++;if(n===0)return this.pos=t,null;let r=[];for(;this.peek()===e.LBracket;)this.advance(),this.peek()===e.RBracket?r.push(null):r.push(this.parseExpr()),this.consumeIf(e.RBracket);if(this.peek()===e.LParen){let t=this.pos;this.advance();let r=0;for(;this.peek()===e.Star;)this.advance(),r++;if(r>0&&this.peek()===e.RParen&&(this.advance(),this.peek()===e.LParen)){let[t,i]=this.parseParamList();return this.consumeIf(e.RParen),{kind:`NestedFnPtr`,outerPtrDepth:n,innerPtrDepth:r,innerParams:t,innerVariadic:i}}this.pos=t}return this.consumeIf(e.RParen),{kind:`Simple`,ptrDepth:n,arrayDims:r}}isParenDeclarator(){if(this.pos+1>=this.tokens.length)return!1;let t=this.tokens[this.pos+1].kind;return t===e.Star||t===e.Identifier||t===e.LParen||t===e.Caret}static alignofTypeSpec(e,t){return 4}static evalConstIntExprWithEnums(e,t,n){return null}static targetIs32bit(){return!1}},I=function(e){return e[e.LogicalOr=0]=`LogicalOr`,e[e.LogicalAnd=1]=`LogicalAnd`,e[e.BitwiseOr=2]=`BitwiseOr`,e[e.BitwiseXor=3]=`BitwiseXor`,e[e.BitwiseAnd=4]=`BitwiseAnd`,e[e.Equality=5]=`Equality`,e[e.Relational=6]=`Relational`,e[e.Shift=7]=`Shift`,e[e.Additive=8]=`Additive`,e[e.Multiplicative=9]=`Multiplicative`,e}(I||{});let L={start:{line:1,column:0},end:{line:1,column:0}};F.prototype.parseExpr=function(){let t=this.parseAssignmentExpr();if(this.peek()===e.Comma){let e=this.peekSpan();return this.advance(),{type:`CommaExpression`,left:t,right:this.parseExpr(),start:e.start,end:e.end,loc:L}}return t},F.prototype.parseAssignmentExpr=function(){let t=R.call(this);if(this.peek()===e.Assign){let e=this.peekSpan();return this.advance(),{type:`AssignExpression`,left:t,right:this.parseAssignmentExpr(),start:e.start,end:e.end,loc:L}}let n=this.compoundAssignOp();if(n!==null){let e=this.peekSpan();return this.advance(),{type:`CompoundAssignExpression`,operator:n,left:t,right:this.parseAssignmentExpr(),start:e.start,end:e.end,loc:L}}return t},F.prototype.compoundAssignOp=function(){switch(this.peek()){case e.PlusAssign:return`Add`;case e.MinusAssign:return`Sub`;case e.StarAssign:return`Mul`;case e.SlashAssign:return`Div`;case e.PercentAssign:return`Mod`;case e.AmpAssign:return`BitAnd`;case e.PipeAssign:return`BitOr`;case e.CaretAssign:return`BitXor`;case e.LessLessAssign:return`Shl`;case e.GreaterGreaterAssign:return`Shr`;default:return null}};function R(){let t=B.call(this,I.LogicalOr);if(this.consumeIf(e.Question)){let n={start:t.start,end:t.end};if(this.peek()===e.Colon)return this.expectContext(e.Colon,`in conditional expression`),{type:`GnuConditionalExpression`,condition:t,alternate:R.call(this),start:n.start,end:n.end,loc:L};let r=this.parseExpr();return this.expectContext(e.Colon,`in conditional expression`),{type:`ConditionalExpression`,condition:t,consequent:r,alternate:R.call(this),start:n.start,end:n.end,loc:L}}return t}function z(t,n){switch(n){case I.LogicalOr:return t===e.PipePipe?`LogicalOr`:null;case I.LogicalAnd:return t===e.AmpAmp?`LogicalAnd`:null;case I.BitwiseOr:return t===e.Pipe?`BitOr`:null;case I.BitwiseXor:return t===e.Caret?`BitXor`:null;case I.BitwiseAnd:return t===e.Amp?`BitAnd`:null;case I.Equality:return t===e.EqualEqual?`Eq`:t===e.BangEqual?`Ne`:null;case I.Relational:return t===e.Less?`Lt`:t===e.LessEqual?`Le`:t===e.Greater?`Gt`:t===e.GreaterEqual?`Ge`:null;case I.Shift:return t===e.LessLess?`Shl`:t===e.GreaterGreater?`Shr`:null;case I.Additive:return t===e.Plus?`Add`:t===e.Minus?`Sub`:null;case I.Multiplicative:return t===e.Star?`Mul`:t===e.Slash?`Div`:t===e.Percent?`Mod`:null}}function B(e){let t=V.call(this,e),n;for(;(n=z(this.peek(),e))!==null;){let r=this.peekSpan();this.advance();let i=V.call(this,e);t={type:`BinaryExpression`,operator:n,left:t,right:i,start:r.start,end:r.end,loc:L}}return t}function V(e){switch(e){case I.LogicalOr:return B.call(this,I.LogicalAnd);case I.LogicalAnd:return B.call(this,I.BitwiseOr);case I.BitwiseOr:return B.call(this,I.BitwiseXor);case I.BitwiseXor:return B.call(this,I.BitwiseAnd);case I.BitwiseAnd:return B.call(this,I.Equality);case I.Equality:return B.call(this,I.Relational);case I.Relational:return B.call(this,I.Shift);case I.Shift:return B.call(this,I.Additive);case I.Additive:return B.call(this,I.Multiplicative);case I.Multiplicative:return this.parseCastExpr()}}F.prototype.parseCastExpr=function(){if(this.peek()===e.LParen){let t=this.pos,n=this.getAttrFlag(1),r=this.getAttrFlag(32),i=this.attrs.parsingVectorSize,a=this.attrs.parsingExtVectorNelem;if(this.attrs.parsingVectorSize=null,this.attrs.parsingExtVectorNelem=null,this.advance(),this.isTypeSpecifier()){let t=this.parseTypeSpecifier();if(t!==null){let n=this.parseAbstractDeclaratorSuffix(t);if(n=this.applyPendingVectorAttr(n),this.peek()===e.RParen){let t=this.peekSpan();if(this.advance(),this.peek()===e.LBrace){let e=this.parseInitializer(),o={type:`CompoundLiteralExpression`,typeSpec:n,init:e,start:t.start,end:t.end,loc:L};return this.setAttrFlag(32,r),this.attrs.parsingVectorSize=i,this.attrs.parsingExtVectorNelem=a,this.parsePostfixOps(o)}let o=this.parseCastExpr();return this.setAttrFlag(32,r),this.attrs.parsingVectorSize=i,this.attrs.parsingExtVectorNelem=a,{type:`CastExpression`,typeSpec:n,operand:o,start:t.start,end:t.end,loc:L}}}}this.pos=t,this.setAttrFlag(1,n),this.setAttrFlag(32,r),this.attrs.parsingVectorSize=i,this.attrs.parsingExtVectorNelem=a}return this.parseUnaryExpr()},F.prototype.parseUnaryExpr=function(){switch(this.peek()){case e.AmpAmp:{let t=this.peekSpan();if(this.pos+1<this.tokens.length&&this.tokens[this.pos+1].kind===e.Identifier){let e=this.tokens[this.pos+1].value??``;return this.advance(),this.advance(),{type:`LabelAddrExpression`,label:e,start:t.start,end:t.end,loc:L}}return this.parsePostfixExpr()}case e.RealPart:{let e=this.peekSpan();return this.advance(),{type:`UnaryExpression`,operator:`RealPart`,operand:this.parseCastExpr(),start:e.start,end:e.end,loc:L}}case e.ImagPart:{let e=this.peekSpan();return this.advance(),{type:`UnaryExpression`,operator:`ImagPart`,operand:this.parseCastExpr(),start:e.start,end:e.end,loc:L}}case e.PlusPlus:{let e=this.peekSpan();return this.advance(),{type:`UnaryExpression`,operator:`PreInc`,operand:this.parseUnaryExpr(),start:e.start,end:e.end,loc:L}}case e.MinusMinus:{let e=this.peekSpan();return this.advance(),{type:`UnaryExpression`,operator:`PreDec`,operand:this.parseUnaryExpr(),start:e.start,end:e.end,loc:L}}case e.Plus:{let e=this.peekSpan();return this.advance(),{type:`UnaryExpression`,operator:`Plus`,operand:this.parseCastExpr(),start:e.start,end:e.end,loc:L}}case e.Minus:{let e=this.peekSpan();return this.advance(),{type:`UnaryExpression`,operator:`Neg`,operand:this.parseCastExpr(),start:e.start,end:e.end,loc:L}}case e.Tilde:{let e=this.peekSpan();return this.advance(),{type:`UnaryExpression`,operator:`BitNot`,operand:this.parseCastExpr(),start:e.start,end:e.end,loc:L}}case e.Bang:{let e=this.peekSpan();return this.advance(),{type:`UnaryExpression`,operator:`LogicalNot`,operand:this.parseCastExpr(),start:e.start,end:e.end,loc:L}}case e.Amp:{let e=this.peekSpan();return this.advance(),{type:`AddressOfExpression`,operand:this.parseCastExpr(),start:e.start,end:e.end,loc:L}}case e.Star:{let e=this.peekSpan();return this.advance(),{type:`DerefExpression`,operand:this.parseCastExpr(),start:e.start,end:e.end,loc:L}}case e.Sizeof:return this.parseSizeofExpr();case e.Alignof:{let t=this.peekSpan();this.advance();let n=this.peekSpan();if(this.expectContext(e.LParen,`after '_Alignof'`),this.isTypeSpecifier()){let r=this.parseTypeSpecifier();if(r!==null){let i=this.parseAbstractDeclaratorSuffix(r);return i=this.applyPendingVectorAttr(i),this.expectClosing(e.RParen,n),{type:`AlignofExpression`,typeSpec:i,start:t.start,end:t.end,loc:L}}}let r=this.parseAssignmentExpr();return this.expectClosing(e.RParen,n),{type:`AlignofExprExpression`,expr:r,start:t.start,end:t.end,loc:L}}case e.GnuAlignof:{let t=this.peekSpan();this.advance();let n=this.peekSpan();if(this.expectContext(e.LParen,`after '__alignof__'`),this.isTypeSpecifier()){let r=this.parseTypeSpecifier();if(r!==null){let i=this.parseAbstractDeclaratorSuffix(r);return i=this.applyPendingVectorAttr(i),this.expectClosing(e.RParen,n),{type:`GnuAlignofExpression`,typeSpec:i,start:t.start,end:t.end,loc:L}}}let r=this.parseAssignmentExpr();return this.expectClosing(e.RParen,n),{type:`GnuAlignofExprExpression`,expr:r,start:t.start,end:t.end,loc:L}}default:return this.parsePostfixExpr()}},F.prototype.parseSizeofExpr=function(){let t=this.peekSpan();if(this.advance(),this.peek()===e.LParen){let n=this.pos,r=this.getAttrFlag(1),i=this.getAttrFlag(32),a=this.attrs.parsingVectorSize,o=this.attrs.parsingExtVectorNelem;if(this.attrs.parsingVectorSize=null,this.attrs.parsingExtVectorNelem=null,this.advance(),this.isTypeSpecifier()){let n=this.parseTypeSpecifier();if(n!==null){let r=this.parseAbstractDeclaratorSuffix(n);if(r=this.applyPendingVectorAttr(r),this.peek()===e.RParen)return this.expect(e.RParen),this.setAttrFlag(32,i),this.attrs.parsingVectorSize=a,this.attrs.parsingExtVectorNelem=o,{type:`SizeofExpression`,argument:{kind:`Type`,typeSpec:r},start:t.start,end:t.end,loc:L}}}this.pos=n,this.setAttrFlag(1,r),this.setAttrFlag(32,i),this.attrs.parsingVectorSize=a,this.attrs.parsingExtVectorNelem=o}return{type:`SizeofExpression`,argument:{kind:`Expr`,expr:this.parseUnaryExpr()},start:t.start,end:t.end,loc:L}},F.prototype.parsePostfixExpr=function(){let e=this.parsePrimaryExpr();return this.parsePostfixOps(e)},F.prototype.parsePostfixOps=function(t){let n=t;for(;;)switch(this.peek()){case e.LParen:{let t=this.peekSpan();this.advance();let r=[];if(this.peek()!==e.RParen)for(r.push(this.parseAssignmentExpr());this.consumeIf(e.Comma);)r.push(this.parseAssignmentExpr());this.expectClosing(e.RParen,t),n={type:`FunctionCallExpression`,callee:n,args:r,start:t.start,end:t.end,loc:L};continue}case e.LBracket:{let t=this.peekSpan();this.advance();let r=this.parseExpr();this.expectClosing(e.RBracket,t),n={type:`ArraySubscriptExpression`,object:n,index:r,start:t.start,end:t.end,loc:L};continue}case e.Dot:{let t=this.peekSpan();this.advance();let r=``;this.peek()===e.Identifier&&(r=this.peekValue()??``,this.advance()),n={type:`MemberAccessExpression`,object:n,member:r,start:t.start,end:t.end,loc:L};continue}case e.Arrow:{let t=this.peekSpan();this.advance();let r=``;this.peek()===e.Identifier&&(r=this.peekValue()??``,this.advance()),n={type:`PointerMemberAccessExpression`,object:n,member:r,start:t.start,end:t.end,loc:L};continue}case e.PlusPlus:{let e=this.peekSpan();this.advance(),n={type:`PostfixExpression`,operator:`PostInc`,operand:n,start:e.start,end:e.end,loc:L};continue}case e.MinusMinus:{let e=this.peekSpan();this.advance(),n={type:`PostfixExpression`,operator:`PostDec`,operand:n,start:e.start,end:e.end,loc:L};continue}default:return n}},F.prototype.parsePrimaryExpr=function(){switch(this.peek()){case e.IntLiteral:{let e=this.peekValue()??0,t=this.peekSpan();return this.advance(),{type:`IntLiteral`,value:e,start:t.start,end:t.end,loc:L}}case e.UIntLiteral:{let e=this.peekValue()??0,t=this.peekSpan();return this.advance(),{type:`UIntLiteral`,value:e,start:t.start,end:t.end,loc:L}}case e.LongLiteral:{let e=this.peekValue()??0,t=this.peekSpan();return this.advance(),{type:`LongLiteral`,value:e,start:t.start,end:t.end,loc:L}}case e.ULongLiteral:{let e=this.peekValue()??0,t=this.peekSpan();return this.advance(),{type:`ULongLiteral`,value:e,start:t.start,end:t.end,loc:L}}case e.LongLongLiteral:{let e=this.peekToken().bigValue??BigInt(0),t=this.peekSpan();return this.advance(),{type:`LongLongLiteral`,value:e,start:t.start,end:t.end,loc:L}}case e.ULongLongLiteral:{let e=this.peekToken().bigValue??BigInt(0),t=this.peekSpan();return this.advance(),{type:`ULongLongLiteral`,value:e,start:t.start,end:t.end,loc:L}}case e.FloatLiteral:{let e=this.peekValue()??0,t=this.peekSpan();return this.advance(),{type:`FloatLiteral`,value:e,start:t.start,end:t.end,loc:L}}case e.FloatLiteralF32:{let e=this.peekValue()??0,t=this.peekSpan();return this.advance(),{type:`FloatLiteralF32`,value:e,start:t.start,end:t.end,loc:L}}case e.FloatLiteralLongDouble:{let e=this.peekValue()??0,t=this.peekSpan();return this.advance(),{type:`FloatLiteralLongDouble`,value:e,f128Bytes:new Uint8Array(16),start:t.start,end:t.end,loc:L}}case e.ImaginaryLiteral:{let e=this.peekValue()??0,t=this.peekSpan();return this.advance(),{type:`ImaginaryLiteral`,value:e,start:t.start,end:t.end,loc:L}}case e.ImaginaryLiteralF32:{let e=this.peekValue()??0,t=this.peekSpan();return this.advance(),{type:`ImaginaryLiteralF32`,value:e,start:t.start,end:t.end,loc:L}}case e.ImaginaryLiteralLongDouble:{let e=this.peekValue()??0,t=this.peekSpan();return this.advance(),{type:`ImaginaryLiteralLongDouble`,value:e,f128Bytes:new Uint8Array(16),start:t.start,end:t.end,loc:L}}case e.StringLiteral:{let t=this.peekValue()??``,n=this.peekSpan();this.advance();let r=!1,i=!1;for(;;)if(this.peek()===e.StringLiteral)t+=this.peekValue()??``,this.advance();else if(this.peek()===e.WideStringLiteral)t+=this.peekValue()??``,r=!0,this.advance();else if(this.peek()===e.Char16StringLiteral)t+=this.peekValue()??``,i=!0,this.advance();else break;return r?{type:`WideStringLiteral`,value:t,start:n.start,end:n.end,loc:L}:i?{type:`Char16StringLiteral`,value:t,start:n.start,end:n.end,loc:L}:{type:`StringLiteral`,value:t,start:n.start,end:n.end,loc:L}}case e.WideStringLiteral:{let t=this.peekValue()??``,n=this.peekSpan();for(this.advance();this.peek()===e.StringLiteral||this.peek()===e.WideStringLiteral||this.peek()===e.Char16StringLiteral;)t+=this.peekValue()??``,this.advance();return{type:`WideStringLiteral`,value:t,start:n.start,end:n.end,loc:L}}case e.Char16StringLiteral:{let t=this.peekValue()??``,n=this.peekSpan();this.advance();let r=!1;for(;;)if(this.peek()===e.StringLiteral||this.peek()===e.Char16StringLiteral)t+=this.peekValue()??``,this.advance();else if(this.peek()===e.WideStringLiteral)t+=this.peekValue()??``,r=!0,this.advance();else break;return r?{type:`WideStringLiteral`,value:t,start:n.start,end:n.end,loc:L}:{type:`Char16StringLiteral`,value:t,start:n.start,end:n.end,loc:L}}case e.CharLiteral:{let e=this.peekValue()??``,t=this.peekSpan();return this.advance(),{type:`CharLiteral`,value:e,start:t.start,end:t.end,loc:L}}case e.Identifier:{let e=this.peekValue()??``,t=this.peekSpan();return this.advance(),{type:`Identifier`,name:e,start:t.start,end:t.end,loc:L}}case e.LParen:{let t=this.peekSpan();if(this.advance(),this.peek()===e.LBrace){let n=this.peekSpan(),r=this.parseCompoundStmt();return this.expectClosing(e.RParen,t),{type:`StmtExpression`,body:r,start:n.start,end:n.end,loc:L}}let n=this.parseExpr();return this.expectClosing(e.RParen,t),n}case e.Generic:return this.parseGenericSelection();case e.Asm:{let t=this.peekSpan();return this.advance(),this.consumeIf(e.Volatile),this.peek()===e.LParen&&this.skipBalancedParens(),{type:`IntLiteral`,value:0,start:t.start,end:t.end,loc:L}}case e.BuiltinVaArg:{let t=this.peekSpan();this.advance();let n=this.peekSpan();this.expectContext(e.LParen,`after '__builtin_va_arg'`);let r=this.parseAssignmentExpr();this.expectContext(e.Comma,`between '__builtin_va_arg' arguments`);let i=this.parseVaArgType();return this.expectClosing(e.RParen,n),{type:`VaArgExpression`,expr:r,typeSpec:i,start:t.start,end:t.end,loc:L}}case e.BuiltinTypesCompatibleP:{let t=this.peekSpan();this.advance();let n=this.peekSpan();this.expectContext(e.LParen,`after '__builtin_types_compatible_p'`);let r=this.parseVaArgType();this.expectContext(e.Comma,`between '__builtin_types_compatible_p' arguments`);let i=this.parseVaArgType();return this.expectClosing(e.RParen,n),{type:`BuiltinTypesCompatiblePExpression`,typeSpec1:r,typeSpec2:i,start:t.start,end:t.end,loc:L}}case e.Typeof:{let t=this.peekSpan();return this.advance(),this.peek()===e.LParen&&this.skipBalancedParens(),{type:`IntLiteral`,value:0,start:t.start,end:t.end,loc:L}}case e.Builtin:{let e=this.peekSpan();return this.advance(),{type:`Identifier`,name:`__builtin_va_list`,start:e.start,end:e.end,loc:L}}case e.Extension:return this.advance(),this.parseCastExpr();default:{let e=this.peekSpan();return this.emitError(`expected expression before '${this.peek()}'`,e),this.advance(),{type:`IntLiteral`,value:0,start:e.start,end:e.end,loc:L}}}},F.prototype.parseGenericSelection=function(){let t=this.peekSpan();this.advance();let n=this.peekSpan();this.expectContext(e.LParen,`after '_Generic'`);let r=this.parseAssignmentExpr();this.expectContext(e.Comma,`after '_Generic' controlling expression`);let i=[];for(;this.peek()!==e.RParen;){let t=this.getAttrFlag(32);this.setAttrFlag(32,!1);let n=null,r=!1;if(this.peek()===e.Default)this.advance();else{let e=this.parseTypeSpecifier();e!==null&&(r=this.getAttrFlag(32),n=this.parseAbstractDeclaratorSuffix(e))}this.setAttrFlag(32,t),this.expectContext(e.Colon,`in '_Generic' association`);let a=this.parseAssignmentExpr();if(i.push({typeSpec:n,expr:a,isConst:r}),!this.consumeIf(e.Comma))break}return this.expectClosing(e.RParen,n),{type:`GenericSelectionExpression`,controlling:r,associations:i,start:t.start,end:t.end,loc:L}},F.prototype.applyPendingVectorAttr=function(e){if(this.attrs.parsingVectorSize!==null){let t=this.attrs.parsingVectorSize;return this.attrs.parsingVectorSize=null,{type:`VectorType`,element:e,totalBytes:t}}if(this.attrs.parsingExtVectorNelem!==null){let t=this.attrs.parsingExtVectorNelem;return this.attrs.parsingExtVectorNelem=null,{type:`VectorType`,element:e,totalBytes:t*this.estimateTypeSize(e)}}return e},F.prototype.estimateTypeSize=function(e){switch(e.type){case`CharType`:case`UnsignedCharType`:case`BoolType`:return 1;case`ShortType`:case`UnsignedShortType`:return 2;case`IntType`:case`UnsignedIntType`:case`SignedType`:case`UnsignedType`:return 4;case`LongType`:case`UnsignedLongType`:return 8;case`LongLongType`:case`UnsignedLongLongType`:return 8;case`FloatType`:return 4;case`DoubleType`:return 8;case`LongDoubleType`:return 16;default:return 4}};function H(){return{hasVoid:!1,hasBool:!1,hasFloat:!1,hasDouble:!1,hasComplex:!1,hasChar:!1,hasShort:!1,hasInt:!1,hasUnsigned:!1,hasSigned:!1,hasStruct:!1,hasUnion:!1,hasEnum:!1,hasTypeof:!1,longCount:0,typedefName:null}}F.prototype.parseTypeSpecifier=function(){this.skipGccExtensions();let t=H(),n={value:null},r=!1,i=!1;loop:for(;;)switch(this.peek()){case e.Const:this.advance(),this.setAttrFlag(32,!0);continue;case e.Volatile:this.advance(),this.setAttrFlag(64,!0);continue;case e.Restrict:this.advance();continue;case e.Register:case e.Auto:this.advance(),i=!0;continue;case e.Noreturn:this.advance(),this.setAttrFlag(C,!0);continue;case e.SegGs:this.advance(),this.attrs.parsingAddressSpace=`SegGs`;continue;case e.SegFs:this.advance(),this.attrs.parsingAddressSpace=`SegFs`;continue;case e.AutoType:return this.advance(),{type:`AutoTypeType`};case e.Inline:this.advance(),this.setAttrFlag(16,!0);continue;case e.Static:this.advance(),this.setAttrFlag(2,!0),i=!0;continue;case e.Extern:this.advance(),this.setAttrFlag(4,!0),i=!0;continue;case e.Typedef:this.advance(),this.setAttrFlag(1,!0),i=!0;continue;case e.ThreadLocal:this.advance(),this.setAttrFlag(8,!0),i=!0;continue;case e.Complex:this.advance(),t.hasComplex=!0,r=!0;continue;case e.Attribute:{let[,e,t]=this.parseGccAttributes();t!==null&&(n.value=t),e!==null&&(this.attrs.parsedAlignas=this.attrs.parsedAlignas===null?e:Math.max(this.attrs.parsedAlignas,e));continue}case e.Extension:this.advance();continue;case e.Atomic:if(this.advance(),this.peek()===e.LParen){let t=this.peekSpan();this.advance();let n=this.getAttrFlag(32);this.setAttrFlag(32,!1);let r=this.parseTypeSpecifier();if(this.setAttrFlag(32,n),r!==null){let n=this.parseAbstractDeclaratorSuffix(r);return this.expectClosing(e.RParen,t),n}let i=this.peekSpan();for(this.emitError(`expected type name in _Atomic(...)`,i);this.peek()!==e.RParen&&this.peek()!==e.Eof;)this.advance();return this.consumeIf(e.RParen),{type:`IntType`}}continue;case e.Alignas:{this.advance();let e=this.parseAlignasArgument();e!==null&&(this.attrs.parsedAlignas=this.attrs.parsedAlignas===null?e:Math.max(this.attrs.parsedAlignas,e));continue}case e.Void:this.advance(),t.hasVoid=!0,r=!0;break loop;case e.Char:this.advance(),t.hasChar=!0,r=!0;break loop;case e.Short:this.advance(),t.hasShort=!0,r=!0;continue;case e.Int:this.advance(),t.hasInt=!0,r=!0;continue;case e.Long:this.advance(),t.longCount++,r=!0;continue;case e.Float:this.advance(),t.hasFloat=!0,r=!0;break loop;case e.Double:this.advance(),t.hasDouble=!0,r=!0;break loop;case e.Bool:this.advance(),t.hasBool=!0,r=!0;break loop;case e.Signed:this.advance(),t.hasSigned=!0,r=!0;continue;case e.Unsigned:this.advance(),t.hasUnsigned=!0,r=!0;continue;case e.Int128:{let e=this.peekSpan();return this.advance(),F.targetIs32bit()?(this.emitError(`__int128 is not supported on this target`,e),{type:`IntType`}):t.hasUnsigned?{type:`UnsignedInt128Type`}:{type:`Int128Type`}}case e.UInt128:{let e=this.peekSpan();return this.advance(),F.targetIs32bit()?(this.emitError(`__uint128_t is not supported on this target`,e),{type:`UnsignedIntType`}):{type:`UnsignedInt128Type`}}case e.Struct:this.advance(),t.hasStruct=!0,r=!0;break loop;case e.Union:this.advance(),t.hasUnion=!0,r=!0;break loop;case e.Enum:this.advance(),t.hasEnum=!0,r=!0;break loop;case e.Typeof:this.advance(),t.hasTypeof=!0,r=!0;break loop;case e.Builtin:if(!r){t.typedefName=`__builtin_va_list`,this.advance(),r=!0;break loop}break loop;case e.Identifier:{let e=this.peekValue();if(typeof e==`string`&&this.typedefs.has(e)&&!this.shadowedTypedefs.has(e)&&!r){t.typedefName=e,this.advance(),r=!0;break loop}break loop}default:break loop}if(this.collectTrailingSpecifiers(t,n),!r)return i?{type:`IntType`}:null;let a=this.resolveTypeFlags(t);return a=this.consumeTrailingQualifiers(a),n.value!==null&&(a=v(n.value,a)),a},F.prototype.collectTrailingSpecifiers=function(t,n){if(t.hasChar||t.hasShort||t.hasInt||t.longCount>0)for(;;)switch(this.peek()){case e.Signed:this.advance(),t.hasSigned=!0;continue;case e.Unsigned:this.advance(),t.hasUnsigned=!0;continue;case e.Int:this.advance(),t.hasInt=!0;continue;case e.Long:this.advance(),t.longCount++;continue;case e.Short:this.advance(),t.hasShort=!0;continue;case e.Char:this.advance(),t.hasChar=!0;continue;case e.Complex:this.advance(),t.hasComplex=!0;continue;case e.Const:case e.Volatile:case e.Restrict:this.advance();continue;case e.SegGs:this.advance(),this.attrs.parsingAddressSpace=`SegGs`;continue;case e.SegFs:this.advance(),this.attrs.parsingAddressSpace=`SegFs`;continue;case e.Static:this.advance(),this.setAttrFlag(2,!0);continue;case e.Extern:this.advance(),this.setAttrFlag(4,!0);continue;case e.Auto:case e.Register:this.advance();continue;case e.ThreadLocal:this.advance(),this.setAttrFlag(8,!0);continue;case e.Noreturn:this.advance(),this.setAttrFlag(C,!0);continue;case e.Inline:this.advance(),this.setAttrFlag(16,!0);continue;case e.Attribute:{let[,e,t]=this.parseGccAttributes();t!==null&&(n.value=t),e!==null&&(this.attrs.parsedAlignas=this.attrs.parsedAlignas===null?e:Math.max(this.attrs.parsedAlignas,e));continue}case e.Extension:this.advance();continue;default:return}else if(t.hasFloat)for(;;)switch(this.peek()){case e.Complex:this.advance(),t.hasComplex=!0;continue;case e.Const:case e.Volatile:case e.Restrict:this.advance();continue;case e.SegGs:this.advance(),this.attrs.parsingAddressSpace=`SegGs`;continue;case e.SegFs:this.advance(),this.attrs.parsingAddressSpace=`SegFs`;continue;case e.Static:this.advance(),this.setAttrFlag(2,!0);continue;case e.Extern:this.advance(),this.setAttrFlag(4,!0);continue;case e.Auto:case e.Register:this.advance();continue;case e.ThreadLocal:this.advance(),this.setAttrFlag(8,!0);continue;case e.Noreturn:this.advance(),this.setAttrFlag(C,!0);continue;case e.Inline:this.advance(),this.setAttrFlag(16,!0);continue;case e.Extension:this.advance();continue;default:return}else if(t.hasDouble)for(;;)switch(this.peek()){case e.Long:this.advance(),t.longCount++;continue;case e.Complex:this.advance(),t.hasComplex=!0;continue;case e.Const:case e.Volatile:case e.Restrict:this.advance();continue;case e.SegGs:this.advance(),this.attrs.parsingAddressSpace=`SegGs`;continue;case e.SegFs:this.advance(),this.attrs.parsingAddressSpace=`SegFs`;continue;case e.Static:this.advance(),this.setAttrFlag(2,!0);continue;case e.Extern:this.advance(),this.setAttrFlag(4,!0);continue;case e.Auto:case e.Register:this.advance();continue;case e.ThreadLocal:this.advance(),this.setAttrFlag(8,!0);continue;case e.Noreturn:this.advance(),this.setAttrFlag(C,!0);continue;case e.Inline:this.advance(),this.setAttrFlag(16,!0);continue;case e.Extension:this.advance();continue;default:return}},F.prototype.resolveTypeFlags=function(e){return e.hasVoid?{type:`VoidType`}:e.hasBool?{type:`BoolType`}:e.hasFloat?e.hasComplex?{type:`ComplexFloatType`}:{type:`FloatType`}:e.hasDouble?e.hasComplex?e.longCount>0?{type:`ComplexLongDoubleType`}:{type:`ComplexDoubleType`}:e.longCount>0?{type:`LongDoubleType`}:{type:`DoubleType`}:e.hasComplex&&!e.hasStruct&&!e.hasUnion&&!e.hasEnum?{type:`ComplexDoubleType`}:e.hasStruct?this.parseStructOrUnion(!0):e.hasUnion?this.parseStructOrUnion(!1):e.hasEnum?this.parseEnumSpecifier():e.hasTypeof?this.parseTypeofSpecifier():e.typedefName===null?e.hasChar?e.hasUnsigned?{type:`UnsignedCharType`}:{type:`CharType`}:e.hasShort?e.hasUnsigned?{type:`UnsignedShortType`}:{type:`ShortType`}:e.longCount>=2?e.hasUnsigned?{type:`UnsignedLongLongType`}:{type:`LongLongType`}:e.longCount===1?e.hasUnsigned?{type:`UnsignedLongType`}:{type:`LongType`}:e.hasUnsigned?{type:`UnsignedIntType`}:{type:`IntType`}:{type:`TypedefNameType`,name:e.typedefName}},F.prototype.parseStructOrUnion=function(t){let[n,r,,]=this.parseGccAttributes(),i=null;this.peek()===e.Identifier&&(i=this.peekValue()??null,this.advance());let[a,o,,]=this.parseGccAttributes();n||=a,o!==null&&(r=o);let s=null;if(this.peek()===e.LBrace){let e=this.getAttrFlag(32);s=this.parseStructFields(),this.setAttrFlag(32,e)}let[c,l,,]=this.parseGccAttributes();n||=c,l!==null&&(r=l);let u=this.pragmaPackAlign,d=t?{type:`StructType`,name:i,fields:s,isPacked:n,maxFieldAlign:u,structAligned:r}:{type:`UnionType`,name:i,fields:s,isPacked:n,maxFieldAlign:u,structAligned:r};if(i!==null&&s!==null&&(d.type===`StructType`||d.type===`UnionType`)){let e=F.alignofTypeSpec(d,null);this.structTagAlignments.set(i,e)}return d},F.prototype.parseEnumSpecifier=function(){let[t,,,]=this.parseGccAttributes(),n=null;this.peek()===e.Identifier&&(n=this.peekValue()??null,this.advance());let[r,,,]=this.parseGccAttributes();t||=r;let i=null;this.peek()===e.LBrace&&(i=this.parseEnumVariants(),this.registerEnumConstants(i));let[a,,,]=this.parseGccAttributes();return t||=a,{type:`EnumType`,name:n,variants:i,isPacked:t}},F.prototype.parseTypeofSpecifier=function(){let t=this.peekSpan();this.expectContext(e.LParen,`after 'typeof'`);let n=this.saveAttrFlags(),r=this.pos;if(this.isTypeSpecifier()){let t=this.parseTypeSpecifier();if(t!==null){let r=this.parseAbstractDeclaratorSuffix(t);if(this.peek()===e.RParen)return this.advance(),this.restoreAttrFlags(n),{type:`TypeofTypeType`,typeSpec:r}}this.pos=r,this.restoreAttrFlags(n),this.expectContext(e.LParen,`after 'typeof'`)}let i=this.parseExpr();return this.expectClosing(e.RParen,t),this.restoreAttrFlags(n),{type:`TypeofExprType`,expr:i}},F.prototype.consumeTrailingQualifiers=function(t){let n=t;for(;;)switch(this.peek()){case e.Complex:this.advance(),n=n.type===`FloatType`?{type:`ComplexFloatType`}:n.type===`DoubleType`?{type:`ComplexDoubleType`}:n.type===`LongDoubleType`?{type:`ComplexLongDoubleType`}:{type:`ComplexDoubleType`};continue;case e.Const:case e.Volatile:case e.Restrict:this.advance();continue;case e.Static:this.advance(),this.setAttrFlag(2,!0);continue;case e.Extern:this.advance(),this.setAttrFlag(4,!0);continue;case e.Auto:case e.Register:this.advance();continue;case e.ThreadLocal:this.advance(),this.setAttrFlag(8,!0);continue;case e.Noreturn:this.advance(),this.setAttrFlag(C,!0);continue;case e.Inline:this.advance(),this.setAttrFlag(16,!0);continue;case e.Attribute:{let[,e]=this.parseGccAttributes();e!==null&&(this.attrs.parsedAlignas=this.attrs.parsedAlignas===null?e:Math.max(this.attrs.parsedAlignas,e));continue}case e.Extension:this.advance();continue;case e.SegGs:this.advance(),this.attrs.parsingAddressSpace=`SegGs`;continue;case e.SegFs:this.advance(),this.attrs.parsingAddressSpace=`SegFs`;continue;default:return n}},F.prototype.parseStructFields=function(){let t=[],n=this.peekSpan();for(this.expectContext(e.LBrace,`for struct/union body`);this.peek()!==e.RBrace&&this.peek()!==e.Eof;){if(this.skipGccExtensions(),this.peek()===e.Semicolon){this.advance();continue}if(this.peek()===e.StaticAssert){this.parseStaticAssert();continue}let n=this.parseTypeSpecifier();if(n!==null){if(this.peek()===e.Semicolon){let e=this.attrs.parsedAlignas;this.attrs.parsedAlignas=null,t.push({typeSpec:n,name:null,bitWidth:null,derived:[],alignment:e,isPacked:!1})}else this.parseStructFieldDeclarators(n,t);this.skipGccExtensions(),this.expectAfter(e.Semicolon,`after struct field declaration`)}else this.advance()}return this.expectClosing(e.RBrace,n),t},F.prototype.parseStructFieldDeclarators=function(t,n){let r=this.attrs.parsedAlignas;this.attrs.parsedAlignas=null;let i={value:r};for(this.consumeStructFieldQualifiers(i),r=i.value;;){if(this.peek()===e.Colon){this.advance();let i=this.parseAssignmentExpr();if(n.push({typeSpec:t,name:null,bitWidth:i,derived:[],alignment:r,isPacked:!1}),!this.consumeIf(e.Comma))break;continue}let[i,a,,,o,s]=this.parseDeclaratorWithAttrs(),c=null;this.consumeIf(e.Colon)&&(c=this.parseAssignmentExpr());let[l,u]=this.parseGccAttributes(),d=o??u??r,f=s||l,[p,m]=this.foldSimpleDerived(t,a);if(n.push({typeSpec:p,name:i,bitWidth:c,derived:m,alignment:d,isPacked:f}),!this.consumeIf(e.Comma))break}},F.prototype.consumeStructFieldQualifiers=function(t){for(;;)switch(this.peek()){case e.Const:case e.Volatile:case e.Restrict:this.advance();continue;case e.SegGs:this.advance(),this.attrs.parsingAddressSpace=`SegGs`;continue;case e.SegFs:this.advance(),this.attrs.parsingAddressSpace=`SegFs`;continue;case e.Alignas:{this.advance();let e=this.parseAlignasArgument();e!==null&&(t.value=t.value===null?e:Math.max(t.value,e));continue}case e.Attribute:{let[,e]=this.parseGccAttributes();e!==null&&(t.value=e);continue}case e.Extension:this.advance();continue;default:return}},F.prototype.foldSimpleDerived=function(e,t){if(t.some(e=>e.kind===`Function`||e.kind===`FunctionPointer`))return[e,[...t]];if(t.length===0)return[e,[]];let n=e,r=0;for(;r<t.length;){let e=t[r];if(e.kind===`Pointer`)n={type:`PointerType`,base:n,addressSpace:`Default`},r++;else if(e.kind===`Array`){let e=r;for(;r<t.length&&t[r].kind===`Array`;)r++;for(let i=r-1;i>=e;i--){let e=t[i];n={type:`ArrayType`,element:n,size:e.size}}}else r++}return[n,[]]},F.prototype.parseEnumVariants=function(){let t=[],n=this.peekSpan();for(this.expectContext(e.LBrace,`for enum body`);this.peek()!==e.RBrace&&this.peek()!==e.Eof;)if(this.peek()===e.Identifier){let n=this.peekValue()??``;this.advance();let r=null;this.consumeIf(e.Assign)&&(r=this.parseAssignmentExpr()),t.push({name:n,value:r}),this.consumeIf(e.Comma)}else this.advance();return this.expectClosing(e.RBrace,n),t},F.prototype.registerEnumConstants=function(e){let t=0;for(let n of e){let e;if(n.value!==null){let t=this.structTagAlignments.size>0?this.structTagAlignments:null;e=F.evalConstIntExprWithEnums(n.value,this.enumConstants,t)}else e=t;e===null?(this.unevaluableEnumConstants.add(n.name),t=null):(this.enumConstants.set(n.name,e),t=e+1)}},F.prototype.parseVaArgType=function(){let t=this.parseTypeSpecifier();if(t!==null){let n=t;for(;this.consumeIf(e.Star);)n={type:`PointerType`,base:n,addressSpace:`Default`},this.skipCvQualifiers();if(this.peek()===e.LParen){let t=this.pos;if(this.advance(),this.consumeIf(e.Star)){for(;this.peek()!==e.RParen&&this.peek()!==e.Eof;)this.advance();this.consumeIf(e.RParen),this.peek()===e.LParen&&this.skipBalancedParens(),n={type:`PointerType`,base:n,addressSpace:`Default`}}else this.pos=t}for(;this.peek()===e.LBracket;){let t=this.peekSpan();this.advance();let r=null;this.peek()!==e.RBracket&&(r=this.parseExpr()),this.expectClosing(e.RBracket,t),n={type:`ArrayType`,element:n,size:r}}return n}let n=this.peekSpan();return this.emitError(`expected type in __builtin_va_arg`,n),{type:`IntType`}},F.prototype.parseAbstractDeclaratorSuffix=function(t){let n=t;for(this.skipCvQualifiers();this.consumeIf(e.Star);){let e=this.attrs.parsingAddressSpace;this.attrs.parsingAddressSpace=`Default`,n={type:`PointerType`,base:n,addressSpace:e},this.skipCvQualifiers()}if(this.peek()===e.LParen){let t=this.pos,r=this.tryParseParenAbstractDeclarator();if(r!==null)if(r.kind===`Simple`){let{ptrDepth:t,arrayDims:i}=r;if(this.peek()===e.LParen){let[e,r]=this.parseParamList();n={type:`FunctionPointerType`,returnType:n,params:e,variadic:r};for(let e=0;e<t-1;e++)n={type:`PointerType`,base:n,addressSpace:`Default`};for(let e=i.length-1;e>=0;e--)n={type:`ArrayType`,element:n,size:i[e]}}else if(this.peek()===e.LBracket||i.length>0){let r=[];for(;this.peek()===e.LBracket;){let t=this.peekSpan();this.advance();let n=null;this.peek()!==e.RBracket&&(n=this.parseExpr()),this.expectClosing(e.RBracket,t),r.push(n)}for(let e=r.length-1;e>=0;e--)n={type:`ArrayType`,element:n,size:r[e]};for(let e=0;e<t;e++)n={type:`PointerType`,base:n,addressSpace:`Default`};for(let e=i.length-1;e>=0;e--)n={type:`ArrayType`,element:n,size:i[e]}}else for(let e=0;e<t;e++)n={type:`PointerType`,base:n,addressSpace:`Default`}}else{let{outerPtrDepth:t,innerPtrDepth:i,innerParams:a,innerVariadic:o}=r;if(this.peek()===e.LParen){let[e,r]=this.parseParamList();for(let e=0;e<i-1;e++)n={type:`PointerType`,base:n,addressSpace:`Default`};n={type:`FunctionPointerType`,returnType:{type:`FunctionPointerType`,returnType:n,params:e,variadic:r},params:a,variadic:o};for(let e=0;e<t-1;e++)n={type:`PointerType`,base:n,addressSpace:`Default`}}else{let e=t+i;for(let t=0;t<e;t++)n={type:`PointerType`,base:n,addressSpace:`Default`}}}else this.pos=t}let r=[];for(;this.peek()===e.LBracket;){let t=this.peekSpan();this.advance();let n=null;this.peek()!==e.RBracket&&(n=this.parseExpr()),this.expectClosing(e.RBracket,t),r.push(n)}for(let e=r.length-1;e>=0;e--)n={type:`ArrayType`,element:n,size:r[e]};return n},F.prototype.parseCompoundStmt=function(){let t=this.peekSpan();this.expect(e.LBrace);let n=[],r=[],i=new Set(this.shadowedTypedefs),a=this.saveAttrFlags();for(;this.peek()===e.GnuLabel;){for(this.advance();;){if(this.peek()===e.Identifier){let e=this.peekValue()??``;r.push(e),this.advance()}if(!this.consumeIf(e.Comma))break}this.expectAfter(e.Semicolon,`after __label__ declaration`)}for(;this.peek()!==e.RBrace&&this.peek()!==e.Eof;){for(this.skipGccExtensions();this.handlePragmaPackToken();)this.consumeIf(e.Semicolon);for(;this.handlePragmaVisibilityToken();)this.consumeIf(e.Semicolon);if(this.peek()===e.RBrace||this.peek()===e.Eof)break;if(this.peek()===e.GnuLabel){for(this.advance();;){if(this.peek()===e.Identifier){let e=this.peekValue()??``;r.push(e),this.advance()}if(!this.consumeIf(e.Comma))break}this.expectAfter(e.Semicolon,`after __label__ declaration`);continue}if(this.peek()===e.StaticAssert)this.parseStaticAssert();else if(this.isTypeSpecifier()&&!this.isTypedefLabel()){let e=this.parseLocalDeclaration();e!==null&&n.push(e)}else{let e=this.parseStmt();n.push(e)}}return this.expectClosing(e.RBrace,t),this.shadowedTypedefs=i,this.restoreAttrFlags(a),{type:`CompoundStatement`,items:n,localLabels:r,start:t.start,end:t.end,loc:{start:{line:1,column:0},end:{line:1,column:0}}}},F.prototype.parseStmt=function(){let t={start:{line:1,column:0},end:{line:1,column:0}};if(this.skipGccExtensions(),this.isTypeSpecifier()&&!this.isTypedefLabel()){let e=this.parseLocalDeclaration();return e===null?{type:`ExpressionStatement`,expr:null,start:0,end:0,loc:t}:{type:`DeclarationStatement`,declaration:e,start:e.start,end:e.end,loc:t}}switch(this.peek()){case e.Return:{let n=this.peekSpan();this.advance();let r=null;return this.peek()!==e.Semicolon&&(r=this.parseExpr()),this.expectAfter(e.Semicolon,`after return statement`),{type:`ReturnStatement`,expr:r,start:n.start,end:n.end,loc:t}}case e.If:{let n=this.peekSpan();this.advance();let r=this.peekSpan();this.expectContext(e.LParen,`after 'if'`);let i=this.parseExpr();this.expectClosing(e.RParen,r);let a=this.parseStmt(),o=null;return this.consumeIf(e.Else)&&(o=this.parseStmt()),{type:`IfStatement`,condition:i,consequent:a,alternate:o,start:n.start,end:n.end,loc:t}}case e.While:{let n=this.peekSpan();this.advance();let r=this.peekSpan();this.expectContext(e.LParen,`after 'while'`);let i=this.parseExpr();return this.expectClosing(e.RParen,r),{type:`WhileStatement`,condition:i,body:this.parseStmt(),start:n.start,end:n.end,loc:t}}case e.Do:{let n=this.peekSpan();this.advance();let r=this.parseStmt();this.expectAfter(e.While,`at end of do-while statement`);let i=this.peekSpan();this.expectContext(e.LParen,`after 'while'`);let a=this.parseExpr();return this.expectClosing(e.RParen,i),this.expectAfter(e.Semicolon,`after do-while statement`),{type:`DoWhileStatement`,body:r,condition:a,start:n.start,end:n.end,loc:t}}case e.For:return this.parseForStmt();case e.LBrace:return this.parseCompoundStmt();case e.Break:{let n=this.peekSpan();return this.advance(),this.expectAfter(e.Semicolon,`after break statement`),{type:`BreakStatement`,start:n.start,end:n.end,loc:t}}case e.Continue:{let n=this.peekSpan();return this.advance(),this.expectAfter(e.Semicolon,`after continue statement`),{type:`ContinueStatement`,start:n.start,end:n.end,loc:t}}case e.Switch:{let n=this.peekSpan();this.advance();let r=this.peekSpan();this.expectContext(e.LParen,`after 'switch'`);let i=this.parseExpr();return this.expectClosing(e.RParen,r),{type:`SwitchStatement`,discriminant:i,body:this.parseStmt(),start:n.start,end:n.end,loc:t}}case e.Case:{let n=this.peekSpan();this.advance();let r=this.parseExpr();if(this.consumeIf(e.Ellipsis)){let i=this.parseExpr();return this.expectContext(e.Colon,`after 'case' expression`),{type:`CaseRangeStatement`,low:r,high:i,body:this.parseStmt(),start:n.start,end:n.end,loc:t}}return this.expectContext(e.Colon,`after 'case' expression`),{type:`CaseStatement`,test:r,body:this.parseStmt(),start:n.start,end:n.end,loc:t}}case e.Default:{let n=this.peekSpan();return this.advance(),this.expectContext(e.Colon,`after 'default'`),{type:`DefaultStatement`,body:this.parseStmt(),start:n.start,end:n.end,loc:t}}case e.Goto:{let n=this.peekSpan();if(this.advance(),this.peek()===e.Star){this.advance();let r=this.parseExpr();return this.expectAfter(e.Semicolon,`after goto statement`),{type:`GotoIndirectStatement`,expr:r,start:n.start,end:n.end,loc:t}}let r=``;return this.peek()===e.Identifier&&(r=this.peekValue()??``,this.advance()),this.expectAfter(e.Semicolon,`after goto statement`),{type:`GotoStatement`,label:r,start:n.start,end:n.end,loc:t}}case e.Identifier:{let n=this.peekValue()??``,r=this.peekSpan();if(this.pos+1<this.tokens.length&&this.tokens[this.pos+1].kind===e.Colon)return this.advance(),this.advance(),this.skipLabelAttributes(),{type:`LabelStatement`,label:n,body:this.parseStmt(),start:r.start,end:r.end,loc:t};let i=this.parseExpr();return this.expectAfter(e.Semicolon,`after expression`),{type:`ExpressionStatement`,expr:i,start:r.start,end:r.end,loc:t}}case e.Asm:return this.parseInlineAsm();case e.Semicolon:{let e=this.peekSpan();return this.advance(),{type:`ExpressionStatement`,expr:null,start:e.start,end:e.end,loc:t}}default:{let n=this.peekSpan(),r=this.parseExpr();return this.expectAfter(e.Semicolon,`after expression`),{type:`ExpressionStatement`,expr:r,start:n.start,end:n.end,loc:t}}}},F.prototype.parseForStmt=function(){let t={start:{line:1,column:0},end:{line:1,column:0}},n=this.peekSpan();this.advance();let r=this.peekSpan();this.expectContext(e.LParen,`after 'for'`);let i=new Set(this.shadowedTypedefs),a=this.saveAttrFlags(),o=null;if(this.peek()===e.Semicolon)this.advance();else if(this.isTypeSpecifier()&&!this.isTypedefLabel()){let e=this.parseLocalDeclaration();e!==null&&(o={kind:`Declaration`,declaration:e})}else o={kind:`Expression`,expr:this.parseExpr()},this.expectAfter(e.Semicolon,`in 'for' statement`);let s=null;this.peek()!==e.Semicolon&&(s=this.parseExpr()),this.expectAfter(e.Semicolon,`in 'for' statement`);let c=null;this.peek()!==e.RParen&&(c=this.parseExpr()),this.expectClosing(e.RParen,r);let l=this.parseStmt();return this.shadowedTypedefs=i,this.restoreAttrFlags(a),{type:`ForStatement`,init:o,condition:s,update:c,body:l,start:n.start,end:n.end,loc:t}},F.prototype.parseInlineAsm=function(){let t={start:{line:1,column:0},end:{line:1,column:0}},n=this.peekSpan();this.advance();let r=!1;for(;;)if(this.peek()===e.Volatile)this.advance();else if(this.peek()===e.Goto)this.advance(),r=!0;else if(this.peek()===e.Inline)this.advance();else break;let i=this.peekSpan();this.expectContext(e.LParen,`after 'asm'`);let a=this.parseAsmString(),o=[],s=[],c=[],l=[];return this.consumeIf(e.Colon)&&(this.peek()!==e.Colon&&this.peek()!==e.RParen&&(o=this.parseAsmOperands()),this.consumeIf(e.Colon)&&(this.peek()!==e.Colon&&this.peek()!==e.RParen&&(s=this.parseAsmOperands()),this.consumeIf(e.Colon)&&(this.peek()!==e.Colon&&this.peek()!==e.RParen&&(c=this.parseAsmClobbers()),r&&this.consumeIf(e.Colon)&&this.peek()!==e.RParen&&(l=this.parseAsmGotoLabels())))),this.expectClosing(e.RParen,i),this.expectAfter(e.Semicolon,`after asm statement`),{type:`InlineAsmStatement`,template:a,outputs:o,inputs:s,clobbers:c,gotoLabels:l,start:n.start,end:n.end,loc:t}},F.prototype.parseAsmString=function(){let t=``;for(;this.peek()===e.StringLiteral||this.peek()===e.WideStringLiteral;){let e=this.peekValue();typeof e==`string`&&(t+=e),this.advance()}return t},F.prototype.parseAsmOperands=function(){let t=[];for(;t.push(this.parseOneAsmOperand()),!(!this.consumeIf(e.Comma)||this.peek()===e.Colon||this.peek()===e.RParen););return t},F.prototype.parseOneAsmOperand=function(){let t=null;if(this.peek()===e.LBracket){let n=this.peekSpan();this.advance(),this.peek()===e.Identifier&&(t=this.peekValue()??null,this.advance()),this.expectClosing(e.RBracket,n)}let n=this.parseAsmString(),r=this.peekSpan();this.expectContext(e.LParen,`in asm operand`);let i=this.parseExpr();return this.expectClosing(e.RParen,r),{name:t,constraint:n,expr:i}},F.prototype.parseAsmClobbers=function(){let t=[];for(;;){let n=this.parseAsmString();if(n.length>0&&t.push(n),!this.consumeIf(e.Comma)||this.peek()===e.Colon||this.peek()===e.RParen)break}return t},F.prototype.parseAsmGotoLabels=function(){let t=[];for(;this.peek()===e.Identifier;){{let e=this.peekValue()??``;t.push(e),this.advance()}if(!this.consumeIf(e.Comma)||this.peek()===e.RParen)break}return t};function U(e){return W(e,null,null)}function W(e,t,n){switch(e.type){case`IntLiteral`:return e.value;case`UIntLiteral`:return e.value;case`LongLiteral`:return e.value;case`ULongLiteral`:return e.value;case`LongLongLiteral`:return Number(e.value);case`ULongLongLiteral`:return Number(e.value);case`CharLiteral`:return typeof e.value==`string`?e.value.charCodeAt(0):0;case`Identifier`:if(t!==null){let n=t.get(e.name);if(n!==void 0)return n}return null;case`BinaryExpression`:{let r=W(e.left,t,n),i=W(e.right,t,n);return r===null||i===null?null:G(e.operator,r,i,e.left,e.right)}case`UnaryExpression`:{let r=W(e.operand,t,n);if(r===null)return null;switch(e.operator){case`Neg`:return-r|0;case`BitNot`:{let t=~r;return K(e.operand)?(t&4294967295)>>>0:t}case`LogicalNot`:return r===0?1:0;case`Plus`:return r;default:return null}}case`ConditionalExpression`:{let r=W(e.condition,t,n);return r===null?null:W(r===0?e.alternate:e.consequent,t,n)}case`CastExpression`:{let r=W(e.operand,t,n);if(r===null)return null;let i=J(e.typeSpec);if(i===null)return null;let a=i*8;if(a>=64&&q(e.typeSpec))return null;if(a===0||a>=64)return r;let o=(1<<a)-1,s=r&o;return q(e.typeSpec)?s>>>0:s&1<<a-1?s|~o:s}case`SizeofExpression`:if(e.argument.kind===`Type`){let t=J(e.argument.typeSpec);if(t!==null)return t}return null;case`AlignofExpression`:return Y(e.typeSpec)?null:X(e.typeSpec,n);case`GnuAlignofExpression`:return Y(e.typeSpec)?null:Z(e.typeSpec,n);case`AlignofExprExpression`:case`GnuAlignofExprExpression`:return null;case`CommaExpression`:return W(e.left,t,n),W(e.right,t,n);default:return null}}function G(e,t,n,r,i){switch(e){case`Add`:return t+n|0;case`Sub`:return t-n|0;case`Mul`:return Math.imul(t,n);case`Div`:return n===0?null:t/n|0;case`Mod`:return n===0?null:t%n|0;case`Shl`:return t<<(n&31);case`Shr`:return K(r)?t>>>(n&31):t>>(n&31);case`BitAnd`:return t&n;case`BitOr`:return t|n;case`BitXor`:return t^n;case`Eq`:return t===n?1:0;case`Ne`:return t===n?0:1;case`Lt`:return K(r)||K(i)?t>>>0<n>>>0?1:0:t<n?1:0;case`Le`:return K(r)||K(i)?t>>>0<=n>>>0?1:0:t<=n?1:0;case`Gt`:return K(r)||K(i)?t>>>0>n>>>0?1:0:t>n?1:0;case`Ge`:return K(r)||K(i)?t>>>0>=n>>>0?1:0:t>=n?1:0;case`LogicalAnd`:return t!==0&&n!==0?1:0;case`LogicalOr`:return t!==0||n!==0?1:0;default:return null}}function K(e){switch(e.type){case`UIntLiteral`:case`ULongLiteral`:case`ULongLongLiteral`:return!0;case`CastExpression`:return q(e.typeSpec);case`UnaryExpression`:return e.operator===`Plus`||e.operator===`Neg`?K(e.operand):!1;case`BinaryExpression`:return K(e.left)||K(e.right);case`SizeofExpression`:case`AlignofExpression`:case`GnuAlignofExpression`:case`AlignofExprExpression`:case`GnuAlignofExprExpression`:return!0;default:return!1}}function q(e){switch(e.type){case`UnsignedCharType`:case`UnsignedShortType`:case`UnsignedIntType`:case`UnsignedType`:case`UnsignedLongType`:case`UnsignedLongLongType`:case`UnsignedInt128Type`:case`BoolType`:case`PointerType`:return!0;default:return!1}}function J(e){switch(e.type){case`VoidType`:case`BoolType`:case`CharType`:case`UnsignedCharType`:return 1;case`ShortType`:case`UnsignedShortType`:return 2;case`IntType`:case`UnsignedIntType`:case`SignedType`:case`UnsignedType`:case`FloatType`:return 4;case`LongType`:case`UnsignedLongType`:return 8;case`LongLongType`:case`UnsignedLongLongType`:case`DoubleType`:return 8;case`PointerType`:case`FunctionPointerType`:return 8;case`Int128Type`:case`UnsignedInt128Type`:return 16;case`LongDoubleType`:return 16;case`ComplexFloatType`:return 8;case`ComplexDoubleType`:return 16;case`ComplexLongDoubleType`:return 32;case`ArrayType`:{if(e.size===null)return 0;let t=J(e.element);if(t===null)return null;let n=U(e.size);return n===null?null:t*n}default:return null}}function Y(e){switch(e.type){case`TypedefNameType`:return!0;case`PointerType`:return Y(e.base);case`ArrayType`:return Y(e.element);default:return!1}}function X(e,t){switch(e.type){case`VoidType`:case`BoolType`:case`CharType`:case`UnsignedCharType`:return 1;case`ShortType`:case`UnsignedShortType`:return 2;case`IntType`:case`UnsignedIntType`:case`SignedType`:case`UnsignedType`:case`FloatType`:return 4;case`LongType`:case`UnsignedLongType`:return 8;case`LongLongType`:case`UnsignedLongLongType`:case`DoubleType`:return 8;case`PointerType`:case`FunctionPointerType`:return 8;case`Int128Type`:case`UnsignedInt128Type`:return 16;case`LongDoubleType`:return 16;case`ComplexFloatType`:return 4;case`ComplexDoubleType`:return 8;case`ComplexLongDoubleType`:return 16;case`ArrayType`:return X(e.element,t);case`StructType`:case`UnionType`:{if(e.isPacked)return 1;let n=e.structAligned??0;if(e.fields)for(let r of e.fields){let e=r.alignment??X(r.typeSpec,t);n=Math.max(n,e)}else if(e.name&&t){let n=t.get(e.name);if(n!==void 0)return n}return n===0?8:n}case`EnumType`:return 4;case`TypedefNameType`:return 8;default:return 8}}function Z(e,t){return X(e,t)}function ee(e,t){let n=[];for(let r of e){let e=r.designators.findIndex(e=>e.kind===`Range`);if(e>=0){let i=r.designators[e];if(i.kind===`Range`){let a=W(i.low,t,null),o=W(i.high,t,null);if(a!==null&&o!==null){let t={start:{line:1,column:0},end:{line:1,column:0}};for(let i=a;i<=o;i++){let a=[...r.designators];a[e]={kind:`Index`,index:{type:`IntLiteral`,value:i,start:0,end:0,loc:t}},n.push({designators:a,init:r.init})}continue}}n.push(r)}else n.push(r)}return n}let Q={start:{line:1,column:0},end:{line:1,column:0}};function $(e=null){return{type:`Declaration`,typeSpec:{type:`VoidType`},declarators:[],isStatic:!1,isExtern:!1,isTypedef:!1,isConst:!1,isVolatile:!1,isCommon:!1,isThreadLocal:!1,isTransparentUnion:!1,isInline:!1,alignment:null,alignasType:null,alignmentSizeofType:null,addressSpace:`Default`,vectorSize:null,extVectorNelem:null,start:e?.start??0,end:e?.end??0,loc:Q}}F.prototype.parseExternalDecl=function(){for(this.attrs=O(),this.skipGccExtensions();this.handlePragmaPackToken();)this.consumeIf(e.Semicolon);for(;this.handlePragmaVisibilityToken();)this.consumeIf(e.Semicolon);if(this.atEof())return null;if(this.peek()===e.Asm){if(this.advance(),this.consumeIf(e.Volatile),this.peek()===e.LParen){this.advance();let t=``;for(;;){let n=this.peek();if(n===e.StringLiteral)t+=this.peekValue(),this.advance();else if(n===e.RParen||n===e.Eof)break;else this.advance()}if(this.peek()===e.RParen&&this.advance(),this.consumeIf(e.Semicolon),t.length>0){let e=this.peekSpan();return{type:`TopLevelAsm`,asm:t,start:e.start,end:e.end,loc:Q}}return $()}return this.consumeIf(e.Semicolon),$()}if(this.peek()===e.StaticAssert)return $(this.parseStaticAssert());let t=this.peekSpan(),n=this.parseTypeSpecifier();if(n===null)if(this.peek()===e.Identifier&&this.pos+1<this.tokens.length&&this.tokens[this.pos+1].kind===e.LParen)n={type:`IntType`};else return null;let r=this.getAttrFlag(128),i=this.getAttrFlag(256);if(this.atEof()||this.peek()===e.Semicolon){let r=this.peek()===e.Semicolon?this.expectAfter(e.Semicolon,`after declaration`):t;return{type:`Declaration`,typeSpec:n,declarators:[],isStatic:this.getAttrFlag(2),isExtern:this.getAttrFlag(4),isTypedef:this.getAttrFlag(1),isConst:this.getAttrFlag(32),isVolatile:this.getAttrFlag(64),isCommon:!1,isThreadLocal:this.getAttrFlag(8),isTransparentUnion:!1,isInline:!1,alignment:null,alignasType:null,alignmentSizeofType:null,addressSpace:this.attrs.parsingAddressSpace,vectorSize:this.attrs.parsingVectorSize,extVectorNelem:this.attrs.parsingExtVectorNelem,start:t.start,end:r.end,loc:Q}}this.consumePostTypeQualifiers();let[a,o,s,c,l,u]=this.parseDeclaratorWithAttrs(),d=null;if(this.peek()===e.Asm&&(this.advance(),this.peek()===e.LParen)){let t=this.peekSpan();this.advance(),this.peek()===e.StringLiteral&&(d=this.peekValue()??null,this.advance()),this.expectClosing(e.RParen,t)}let[f,p,m,h]=this.parseGccAttributes(),g=s??m,_=c,b=this.attrs.parsedAlignas,x=this.attrs.parsedAlignasType,S=this.attrs.parsedAlignmentSizeofType;for(let e of[l,p])e!=null&&(b=b===null?e:Math.max(b,e));let T=r||this.getAttrFlag(128),k=i||this.getAttrFlag(256),A=this.getAttrFlag(512),j=this.attrs.parsingAliasTarget,M=this.attrs.parsingVisibility??this.pragmaDefaultVisibility??null,N=this.attrs.parsingSection,P=this.getAttrFlag(w),F=this.getAttrFlag(C),I=this.attrs.parsingCleanupFn,L=this.attrs.parsingSymver,R={isConstructor:T,isDestructor:k,isWeak:A,isErrorAttr:P,isNoreturn:F,isUsed:this.getAttrFlag(y),isFastcall:this.getAttrFlag(E),isNaked:this.getAttrFlag(D),aliasTarget:j,visibility:M,section:N,asmRegister:d,cleanupFn:I,symver:L};if(g!=null&&(n=v(g,n)),o.length>0&&o[o.length-1].kind===`Function`&&(this.peek()===e.LBrace||this.isTypeSpecifier()))return this.parseFunctionDef(n,a,o,t,R);{let e={attrs:R,alignment:b,alignasType:x,alignmentSizeofType:S,isCommon:_};return this.parseDeclarationRest(n,a,o,t,e)}},F.prototype.parseFunctionDef=function(t,n,r,i,a){this.setAttrFlag(1,!1);let o=[],s=!1,c=r[r.length-1];c.kind===`Function`&&(o=[...c.params],s=c.variadic);let l=this.peek()!==e.LBrace,u=l?this.parseKrParams(o):o,d=this.getAttrFlag(2),f=this.getAttrFlag(16),p=this.getAttrFlag(4),m=this.getAttrFlag(b),h=this.getAttrFlag(x),g=this.getAttrFlag(S),_=this.buildReturnType(t,r),v=new Set(this.shadowedTypedefs);for(let e of u)e.name!==null&&this.typedefs.has(e.name)&&!this.shadowedTypedefs.has(e.name)&&this.shadowedTypedefs.add(e.name);this.setAttrFlag(C,!1);let y=this.parseCompoundStmt();this.shadowedTypedefs=v;let w={isStatic:d,isInline:f,isExtern:p,isGnuInline:m,isAlwaysInline:h,isNoinline:g,isConstructor:a.isConstructor,isDestructor:a.isDestructor,isWeak:a.isWeak,isUsed:a.isUsed,isFastcall:a.isFastcall,isNaked:a.isNaked,isNoreturn:a.isNoreturn,section:a.section,visibility:a.visibility,symver:a.symver};return{type:`FunctionDefinition`,returnType:_,name:n??``,params:u,variadic:s,body:y,attrs:w,isKr:l,start:i.start,end:i.end,loc:Q}},F.prototype.buildReturnType=function(e,t){let n=e,r=t.findIndex(e=>e.kind===`Function`);if(r>=0){for(let e=r+1;e<t.length;e++){let r=t[e];r.kind===`Array`?n={type:`ArrayType`,element:n,size:r.size}:r.kind===`Pointer`&&(n={type:`PointerType`,base:n,addressSpace:`Default`})}for(let e=0;e<r;e++){let r=t[e];r.kind===`Pointer`?n={type:`PointerType`,base:n,addressSpace:`Default`}:r.kind===`Array`&&(n={type:`ArrayType`,element:n,size:r.size})}}else for(let e of t)if(e.kind===`Pointer`)n={type:`PointerType`,base:n,addressSpace:`Default`};else break;return n},F.prototype.parseKrParams=function(t){let n=[...t];for(;this.isTypeSpecifier()&&this.peek()!==e.LBrace;){let t=this.parseTypeSpecifier();if(t===null)break;for(;;){let[r,i]=this.parseDeclaratorWithAttrs();if(r!==null){let[e,a]=this.applyKrDerivations(t,i),o=0;if(a!==null){let e=!1,t=0;for(let n of i)n.kind===`FunctionPointer`||n.kind===`Function`?e=!0:n.kind===`Pointer`&&e&&t++;o=1+t}for(let t of n)if(t.name===r){t.typeSpec=e,t.fptrParams=a,t.fptrInnerPtrDepth=o;break}}if(!this.consumeIf(e.Comma))break}this.expectAfter(e.Semicolon,`after parameter declaration`)}return n},F.prototype.applyKrDerivations=function(e,t){let n=e,r=t.find(e=>e.kind===`FunctionPointer`);if(r&&r.kind===`FunctionPointer`){let e=t.filter(e=>e.kind===`Pointer`).length;for(let t=0;t<Math.max(0,e-1);t++)n={type:`PointerType`,base:n,addressSpace:`Default`};return n={type:`PointerType`,base:n,addressSpace:`Default`},[n,r.params]}for(let e of t)e.kind===`Pointer`&&(n={type:`PointerType`,base:n,addressSpace:`Default`});let i=t.filter(e=>e.kind===`Array`).map(e=>e.size);if(i.length>0){for(let e=i.length-1;e>=1;e--)n={type:`ArrayType`,element:n,size:i[e]};n={type:`PointerType`,base:n,addressSpace:`Default`}}for(let e of t)e.kind===`Function`&&(n={type:`PointerType`,base:n,addressSpace:`Default`});return[n,null]},F.prototype.parseDeclarationRest=function(t,n,r,i,a){let o=[],s=this.consumeIf(e.Assign)?this.parseInitializer():null,c=a.attrs.section;o.push({type:`InitDeclarator`,name:n??``,derived:r,init:s,attrs:{...a.attrs},start:i.start,end:i.end,loc:Q});let l=null;if(this.peek()===e.Asm&&(this.advance(),this.peek()===e.LParen)){let t=this.peekSpan();this.advance(),this.peek()===e.StringLiteral&&(l=this.peekValue()??null,this.advance()),this.expectClosing(e.RParen,t)}let[u,d,f,p]=this.parseGccAttributes(),m=o[o.length-1];for(l!==null&&(m.attrs.asmRegister=l),this.getAttrFlag(128)&&(m.attrs.isConstructor=!0),this.getAttrFlag(256)&&(m.attrs.isDestructor=!0),this.getAttrFlag(512)&&(m.attrs.isWeak=!0),this.attrs.parsingAliasTarget&&(m.attrs.aliasTarget=this.attrs.parsingAliasTarget),this.attrs.parsingVisibility&&(m.attrs.visibility=this.attrs.parsingVisibility),this.attrs.parsingSection&&(m.attrs.section=this.attrs.parsingSection),this.attrs.parsingCleanupFn&&(m.attrs.cleanupFn=this.attrs.parsingCleanupFn),this.getAttrFlag(y)&&(m.attrs.isUsed=!0),this.getAttrFlag(C)&&(m.attrs.isNoreturn=!0),this.getAttrFlag(E)&&(m.attrs.isFastcall=!0),this.getAttrFlag(D)&&(m.attrs.isNaked=!0),this.getAttrFlag(w)&&(m.attrs.isErrorAttr=!0),this.setAttrFlag(512,!1),this.attrs.parsingAliasTarget=null,this.attrs.parsingVisibility=null,this.attrs.parsingSection=null,this.setAttrFlag(w,!1),this.setAttrFlag(C,!1),this.attrs.parsingCleanupFn=null,this.setAttrFlag(y,!1),this.setAttrFlag(E,!1),this.setAttrFlag(D,!1),d!=null&&(a.alignment=a.alignment===null?d:Math.max(a.alignment,d));this.consumeIf(e.Comma);){let[t,n]=this.parseDeclaratorWithAttrs(),r=null;if(this.peek()===e.Asm&&(this.advance(),this.peek()===e.LParen)){let t=this.peekSpan();this.advance(),this.peek()===e.StringLiteral&&(r=this.peekValue()??null,this.advance()),this.expectClosing(e.RParen,t)}this.parseGccAttributes();let s=this.getAttrFlag(512),l=this.attrs.parsingAliasTarget??null,u=this.attrs.parsingVisibility??this.pragmaDefaultVisibility??null,d=this.attrs.parsingSection??c??null,f=this.attrs.parsingCleanupFn??null,p=this.getAttrFlag(y),m=this.getAttrFlag(C),h=this.getAttrFlag(w);this.setAttrFlag(512,!1),this.setAttrFlag(y,!1),this.setAttrFlag(E,!1),this.setAttrFlag(D,!1),this.setAttrFlag(C,!1),this.setAttrFlag(w,!1);let g=this.consumeIf(e.Assign)?this.parseInitializer():null,_=this.getAttrFlag(E);if(o.push({type:`InitDeclarator`,name:t??``,derived:n,init:g,attrs:{isConstructor:this.getAttrFlag(128),isDestructor:this.getAttrFlag(256),isWeak:s,isErrorAttr:h,isNoreturn:m,isUsed:p,isFastcall:_,isNaked:!1,aliasTarget:l,visibility:u,section:d,asmRegister:r,cleanupFn:f,symver:null},start:i.start,end:i.end,loc:Q}),this.peek()===e.Asm&&(this.advance(),this.peek()===e.LParen)){let t=this.peekSpan();this.advance(),this.peek()===e.StringLiteral&&(o[o.length-1].attrs.asmRegister=this.peekValue()??null,this.advance()),this.expectClosing(e.RParen,t)}let[,v]=this.parseGccAttributes();v!=null&&(a.alignment=a.alignment===null?v:Math.max(a.alignment,v))}let h=this.getAttrFlag(1),g=this.getAttrFlag(T);this.setAttrFlag(T,!1),this.registerTypedefs(o);let _=this.expectAfter(e.Semicolon,`after declaration`);return{type:`Declaration`,typeSpec:t,declarators:o,isStatic:this.getAttrFlag(2),isExtern:this.getAttrFlag(4),isTypedef:h,isConst:this.getAttrFlag(32),isVolatile:this.getAttrFlag(64),isCommon:a.isCommon,isThreadLocal:this.getAttrFlag(8),isTransparentUnion:g,isInline:this.getAttrFlag(16),alignment:a.alignment,alignasType:a.alignasType,alignmentSizeofType:a.alignmentSizeofType,addressSpace:this.attrs.parsingAddressSpace,vectorSize:this.attrs.parsingVectorSize,extVectorNelem:this.attrs.parsingExtVectorNelem,start:i.start,end:_.end,loc:Q}},F.prototype.parseLocalDeclaration=function(){let t=this.saveAttrFlags();if(this.setAttrFlag(2,!1),this.setAttrFlag(4,!1),this.setAttrFlag(1,!1),this.setAttrFlag(16,!1),this.setAttrFlag(8,!1),this.setAttrFlag(32,!1),this.setAttrFlag(64,!1),this.attrs.parsingAddressSpace=`Default`,this.skipGccExtensions(),this.peek()===e.StaticAssert){let e=this.parseStaticAssert();return this.restoreAttrFlags(t),$(e)}let n=this.peekSpan(),r=this.parseTypeSpecifier();if(r===null)return this.restoreAttrFlags(t),null;if(this.peek()===e.Semicolon){let e=this.peekSpan();this.advance();let i=this.getAttrFlag(2),a=this.getAttrFlag(4),o=this.getAttrFlag(1),s=this.getAttrFlag(32),c=this.getAttrFlag(64),l=this.getAttrFlag(8);return this.restoreAttrFlags(t),{type:`Declaration`,typeSpec:r,declarators:[],isStatic:i,isExtern:a,isTypedef:o,isConst:s,isVolatile:c,isCommon:!1,isThreadLocal:l,isTransparentUnion:!1,isInline:!1,alignment:null,alignasType:null,alignmentSizeofType:null,addressSpace:`Default`,vectorSize:null,extVectorNelem:null,start:n.start,end:e.end,loc:Q}}this.consumePostTypeQualifiers();let i=this.getAttrFlag(2),a=this.getAttrFlag(4),o=[],s=this.attrs.parsedAlignas??null,c=null;for(;;){let[t,r,i,a,l,u]=this.parseDeclaratorWithAttrs(),d=null;if(this.peek()===e.Asm&&(this.advance(),this.peek()===e.LParen)){let t=this.peekSpan();this.advance(),this.peek()===e.StringLiteral&&(d=this.peekValue()??null,this.advance()),this.expectClosing(e.RParen,t)}let[f,p,m]=this.parseGccAttributes(),h=this.attrs.parsingCleanupFn;this.attrs.parsingCleanupFn=null;let g=this.attrs.parsingSection;this.attrs.parsingSection=null,c=c??i??m,l!=null&&(s=s===null?l:Math.max(s,l)),p!=null&&(s=s===null?p:Math.max(s,p));let _=this.consumeIf(e.Assign)?this.parseInitializer():null,v={isConstructor:this.getAttrFlag(128),isDestructor:this.getAttrFlag(256),isWeak:this.getAttrFlag(512),isErrorAttr:this.getAttrFlag(w),isNoreturn:this.getAttrFlag(C),isUsed:this.getAttrFlag(y),isFastcall:this.getAttrFlag(E),isNaked:this.getAttrFlag(D),aliasTarget:this.attrs.parsingAliasTarget??null,visibility:this.attrs.parsingVisibility??this.pragmaDefaultVisibility??null,section:g??null,asmRegister:d,cleanupFn:h??null,symver:this.attrs.parsingSymver??null};if(o.push({type:`InitDeclarator`,name:t??``,derived:r,init:_,attrs:v,start:n.start,end:n.end,loc:Q}),this.peek()===e.Asm&&(this.advance(),this.peek()===e.LParen)){let t=this.peekSpan();this.advance(),this.peek()===e.StringLiteral&&this.advance(),this.expectClosing(e.RParen,t)}let[,b]=this.parseGccAttributes();if(b!=null&&(s=s===null?b:Math.max(s,b)),!this.consumeIf(e.Comma))break}c!==null&&(r=v(c,r));let l=this.getAttrFlag(1);if(l){for(let e of o)e.name&&e.name.length>0&&(this.typedefs.add(e.name),this.shadowedTypedefs.delete(e.name));this.setAttrFlag(1,!1)}else for(let e of o)e.name&&e.name.length>0&&this.typedefs.has(e.name)&&this.shadowedTypedefs.add(e.name);let u=this.expectAfter(e.Semicolon,`after declaration`);if(this.attrs.parsedAlignas!==null){let e=this.attrs.parsedAlignas;s=s===null?e:Math.max(s,e),this.attrs.parsedAlignas=null}let d=this.attrs.parsedAlignasType;this.attrs.parsedAlignasType=null;let f=this.attrs.parsedAlignmentSizeofType;this.attrs.parsedAlignmentSizeofType=null;let p=this.getAttrFlag(T);this.setAttrFlag(T,!1);let m={type:`Declaration`,typeSpec:r,declarators:o,isStatic:i,isExtern:a,isTypedef:l,isConst:this.getAttrFlag(32),isVolatile:this.getAttrFlag(64),isCommon:!1,isThreadLocal:this.getAttrFlag(8),isTransparentUnion:p,isInline:!1,alignment:s,alignasType:d??null,alignmentSizeofType:f??null,addressSpace:this.attrs.parsingAddressSpace,vectorSize:this.attrs.parsingVectorSize,extVectorNelem:this.attrs.parsingExtVectorNelem,start:n.start,end:u.end,loc:Q};return this.restoreAttrFlags(t),m},F.prototype.parseInitializer=function(){if(this.peek()!==e.LBrace)return{kind:`Expr`,expr:this.parseAssignmentExpr()};let t=this.peekSpan();this.advance();let n=[];for(;this.peek()!==e.RBrace&&!this.atEof();){let t=[];for(;this.peek()===e.LBracket||this.peek()===e.Dot;)if(this.peek()===e.LBracket){let n=this.peekSpan();this.advance();let r=this.parseAssignmentExpr();if(this.peek()===e.Ellipsis){this.advance();let i=this.parseAssignmentExpr();this.expectClosing(e.RBracket,n),t.push({kind:`Range`,low:r,high:i})}else this.expectClosing(e.RBracket,n),t.push({kind:`Index`,index:r})}else if(this.advance(),this.peek()===e.Identifier){let e=this.peekValue();this.advance(),t.push({kind:`Field`,name:e})}else this.advance();if(t.length===0&&this.peek()===e.Identifier&&this.pos+1<this.tokens.length&&this.tokens[this.pos+1].kind===e.Colon){let e=this.peekValue();this.advance(),this.advance(),t.push({kind:`Field`,name:e})}t.length>0&&this.consumeIf(e.Assign);let r=this.parseInitializer();if(n.push({designators:t,init:r}),!this.consumeIf(e.Comma))break}return this.expectClosing(e.RBrace,t),{kind:`List`,items:ee(n,this.enumConstants.size>0?this.enumConstants:null)}},F.prototype.parseStaticAssert=function(){let t=this.peekSpan();this.advance();let n=this.peekSpan();this.expectContext(e.LParen,`after '_Static_assert'`);let r=this.parseAssignmentExpr(),i=null;if(this.consumeIf(e.Comma)){let t=``;for(;this.peek()===e.StringLiteral;)t+=this.peekValue(),this.advance();i=t}let a=this.expectClosing(e.RParen,n).end;if(this.peek()===e.Semicolon){let e=this.peekSpan();this.advance(),a=e.end}let o=W(r,this.enumConstants.size>0?this.enumConstants:null,this.structTagAlignments.size>0?this.structTagAlignments:null);if(o!==null&&o===0){let e={start:r.start,end:r.end},t=i===null?`static assertion failed`:`static assertion failed: "${i}"`;this.emitError(t,e)}return{start:t.start,end:a}},F.prototype.consumePostTypeQualifiers=function(){for(;;)switch(this.peek()){case e.Static:this.setAttrFlag(2,!0),this.advance();break;case e.Extern:this.setAttrFlag(4,!0),this.advance();break;case e.Typedef:this.setAttrFlag(1,!0),this.advance();break;case e.Inline:this.setAttrFlag(16,!0),this.advance();break;case e.ThreadLocal:this.setAttrFlag(8,!0),this.advance();break;case e.Const:this.setAttrFlag(32,!0),this.advance();break;case e.Volatile:this.setAttrFlag(64,!0),this.advance();break;case e.Register:this.advance();break;case e.Restrict:this.advance();break;case e.Noreturn:this.setAttrFlag(C,!0),this.advance();break;case e.Attribute:case e.Extension:this.skipGccExtensions();break;default:return}},F.prototype.registerTypedefs=function(e){if(this.getAttrFlag(1))for(let t of e)t.name&&t.name.length>0&&(this.typedefs.add(t.name),this.shadowedTypedefs.delete(t.name))},F.prototype.skipArrayDimensions=function(){for(;this.peek()===e.LBracket;){for(this.advance();this.peek()!==e.RBracket&&!this.atEof();)this.advance();this.consumeIf(e.RBracket)}},F.prototype.parseDeclarator=function(){let[e,t]=this.parseDeclaratorWithAttrs();return[e,t]},F.prototype.parseDeclaratorWithAttrs=function(){let t=[],n=null,r=!1,[i,a]=this.parseGccAttributes();for(r||=i,a!==null&&(n=n===null?a:Math.max(n,a));this.consumeIf(e.Star);)t.push({kind:`Pointer`}),this.skipCvQualifiers(),this.skipGccExtensions();let o=null,s=[],c=this.peek();if(c===e.Identifier)o=this.peekValue(),this.advance();else if(c===e.LParen&&this.isParenDeclarator()){let t=this.pos;this.advance();let[n,r]=this.parseDeclarator();this.consumeIf(e.RParen)?(o=n,s=r):(this.pos=t,o=null,s=[])}let l=[];for(;;){let t=this.peek();if(t===e.LBracket){let t=this.peekSpan();this.advance(),this.skipArrayQualifiers();let n=null;this.peek()===e.RBracket||(this.peek()===e.Star&&this.pos+1<this.tokens.length&&this.tokens[this.pos+1].kind===e.RBracket?this.advance():n=this.parseExpr()),this.expectClosing(e.RBracket,t),l.push({kind:`Array`,size:n})}else if(t===e.LParen){let[e,t]=this.parseParamList();l.push({kind:`Function`,params:e,variadic:t})}else break}let u=this.combineDeclaratorParts(t,s,l),[d,f,p,m]=this.parseGccAttributes();r||=d;let h=null;return n!==null&&f!==null?h=Math.max(n,f):n===null?f!==null&&(h=f):h=n,[o,u,p,m,h,r]},F.prototype.isParenDeclarator=function(){if(this.pos+1>=this.tokens.length)return!1;let t=this.tokens[this.pos+1];switch(t.kind){case e.Star:case e.Caret:case e.LParen:case e.LBracket:case e.Attribute:case e.Extension:return!0;case e.Identifier:{let e=t.value;return!this.typedefs.has(e)||this.shadowedTypedefs.has(e)}case e.RParen:case e.Ellipsis:return!1;case e.Void:case e.Char:case e.Short:case e.Int:case e.Long:case e.Float:case e.Double:case e.Signed:case e.Unsigned:case e.Struct:case e.Union:case e.Enum:case e.Const:case e.Volatile:case e.Static:case e.Extern:case e.Register:case e.Typedef:case e.Inline:case e.Bool:case e.Typeof:case e.Noreturn:case e.Restrict:case e.Complex:case e.Atomic:case e.Auto:case e.Alignas:case e.Builtin:return!1;default:return!1}},F.prototype.combineDeclaratorParts=function(e,t,n){if(t.length===0&&n.length===0)return e;if(t.length===0)return[...e,...n];let r=t.every(e=>e.kind===`Pointer`||e.kind===`Array`),i=t.some(e=>e.kind===`Pointer`),a=n.length>0&&n[0].kind===`Function`;if(r&&i&&a&&n.length===1){let r=[...e],i=t.filter(e=>e.kind===`Pointer`).length,a=i>0?i-1:0;r.push({kind:`Pointer`});let o=n[0];o.kind===`Function`&&r.push({kind:`FunctionPointer`,params:o.params,variadic:o.variadic});for(let e=0;e<a;e++)r.push({kind:`Pointer`});for(let e of t)e.kind===`Array`&&r.push({...e});return r}let o=n.every(e=>e.kind===`Array`);if(r&&i&&o){let r=te(t,e=>e.kind===`Pointer`),i=[...e];for(let e=0;e<r;e++)t[e].kind===`Array`&&i.push({...t[e]});i.push(...n);for(let e=0;e<=r;e++)t[e].kind===`Pointer`&&i.push({...t[e]});for(let e=r+1;e<t.length;e++)i.push({...t[e]});return i}let s=t.length>0&&t[0].kind===`Pointer`,c=t.some(e=>e.kind===`FunctionPointer`);if(s&&c&&a){let r=[...e,...t];for(let e of n)e.kind===`Function`?(r.push({kind:`Pointer`}),r.push({kind:`FunctionPointer`,params:e.params,variadic:e.variadic})):r.push(e);return r}return[...e,...n,...t]};function te(e,t){for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n;return-1}F.prototype.parseParamList=function(){let t=this.peekSpan();this.expectContext(e.LParen,`for parameter list`);let n=[],r=!1;if(this.peek()===e.RParen)return this.advance(),[n,r];if(this.peek()===e.Void){let t=this.pos;if(this.advance(),this.peek()===e.RParen)return this.advance(),[n,r];this.pos=t}if(this.peek()===e.Identifier){let e=this.peekValue();if((!this.typedefs.has(e)||this.shadowedTypedefs.has(e))&&!this.isTypeSpecifier())return this.parseKrIdentifierList()}for(;;){if(this.peek()===e.Ellipsis){this.advance(),r=!0;break}let t=this.getAttrFlag(C);this.skipGccExtensions();let i=this.getAttrFlag(32);this.setAttrFlag(32,!1),this.setAttrFlag(C,t);let a=this.parseTypeSpecifier();if(a!==null){let e=this.getAttrFlag(32),[r,o,s,c,l,u,d]=this.parseParamDeclaratorFull();this.skipGccExtensions();let f=a;for(let e=0;e<o;e++)f={type:`PointerType`,base:f,addressSpace:`Default`};if(l.length>0){for(let e=l.length-1;e>=0;e--)f={type:`ArrayType`,element:f,size:l[e]};f={type:`PointerType`,base:f,addressSpace:`Default`}}let p=[];if(s.length>0){s[0]!==null&&p.push(s[0]);for(let e=s.length-1;e>=1;e--)f={type:`ArrayType`,element:f,size:s[e]};f={type:`PointerType`,base:f,addressSpace:`Default`}}c&&(f={type:`PointerType`,base:f,addressSpace:`Default`}),this.setAttrFlag(32,i),this.setAttrFlag(C,t),n.push({typeSpec:f,name:r,fptrParams:u,isConst:e,vlaSizeExprs:p,fptrInnerPtrDepth:d})}else{this.setAttrFlag(32,i),this.setAttrFlag(C,t);break}if(!this.consumeIf(e.Comma))break}return this.expectClosing(e.RParen,t),[n,r]},F.prototype.parseKrIdentifierList=function(){let t=[];for(;this.peek()===e.Identifier;){let n=this.peekValue();if(this.advance(),t.push({typeSpec:{type:`IntType`},name:n,fptrParams:null,isConst:!1,vlaSizeExprs:[],fptrInnerPtrDepth:0}),!this.consumeIf(e.Comma))break}return this.expect(e.RParen),[t,!1]},F.prototype.parseParamDeclaratorFull=function(){let t=0;for(;this.consumeIf(e.Star);)t++,this.skipCvQualifiers(),this.skipGccExtensions();let n={pointerDepth:t,arrayDims:[],isFuncPtr:!1,ptrToArrayDims:[],fptrParams:null,fptrInnerPtrDepth:0},r=null;for(this.peek()===e.LParen&&this.isParenDeclarator()?r=this.parseParenParamDeclarator(n):this.peek()===e.Identifier&&(r=this.peekValue(),this.advance());this.peek()===e.LBracket;)if(this.advance(),this.skipArrayQualifiers(),this.peek()===e.RBracket)n.arrayDims.push(null),this.advance();else if(this.peek()===e.Star&&this.pos+1<this.tokens.length&&this.tokens[this.pos+1].kind===e.RBracket)this.advance(),n.arrayDims.push(null),this.advance();else{let t=this.parseExpr();n.arrayDims.push(t),this.expect(e.RBracket)}if(this.peek()===e.LParen){n.isFuncPtr=!0;let[e]=this.parseParamList();n.fptrParams=e}return[r,n.pointerDepth,n.arrayDims,n.isFuncPtr,n.ptrToArrayDims,n.fptrParams,n.fptrInnerPtrDepth]},F.prototype.parseParenParamDeclarator=function(t){let n=this.pos;if(this.advance(),this.skipGccExtensions(),this.peek()===e.LBracket){for(;this.peek()===e.LBracket;)if(this.advance(),this.skipArrayQualifiers(),this.peek()===e.RBracket)t.arrayDims.push(null),this.advance();else{let n=this.parseExpr();t.arrayDims.push(n),this.expect(e.RBracket)}return this.expect(e.RParen),null}if(this.peek()===e.Star){let n=0;for(;this.consumeIf(e.Star);)n++,this.skipCvQualifiers(),this.skipGccExtensions();let r=null;this.peek()===e.Identifier?(r=this.peekValue(),this.advance()):this.peek()===e.LParen&&(r=this.extractParenName()),t.pointerDepth+=Math.max(0,n-1);let i=[];for(;this.peek()===e.LBracket;)if(this.advance(),this.skipArrayQualifiers(),this.peek()===e.RBracket)i.push(null),this.advance();else{let t=this.parseExpr();i.push(t),this.expect(e.RBracket)}if(this.expect(e.RParen),i.length>0&&this.peek()!==e.LParen)t.pointerDepth+=1,t.arrayDims.length=0,t.arrayDims.push(...i);else if(this.peek()===e.LParen){t.isFuncPtr=!0,t.fptrInnerPtrDepth=n;let[e]=this.parseParamList();t.fptrParams=e}else if(this.peek()===e.LBracket)for(;this.peek()===e.LBracket;)if(this.advance(),this.skipArrayQualifiers(),this.peek()===e.RBracket)t.ptrToArrayDims.push(null),this.advance();else{let n=this.parseExpr();t.ptrToArrayDims.push(n),this.expect(e.RBracket)}else t.pointerDepth+=1;return r}if(this.consumeIf(e.Caret)){let t=null;return this.peek()===e.Identifier&&(t=this.peekValue(),this.advance()),this.expect(e.RParen),this.peek()===e.LParen&&this.skipBalancedParens(),t}if(this.peek()===e.Identifier){let n=this.peekValue();if(this.advance(),this.peek()===e.LParen){t.isFuncPtr=!0;let[e]=this.parseParamList();t.fptrParams=e}if(this.expect(e.RParen),this.skipArrayDimensions(),!t.isFuncPtr&&this.peek()===e.LParen){t.isFuncPtr=!0;let[e]=this.parseParamList();t.fptrParams=e}return n}if(this.peek()===e.LParen){let n=this.pos,r=this.extractParenName();if(r!==null){if(this.skipArrayDimensions(),this.peek()===e.LParen){t.isFuncPtr=!0;let[e]=this.parseParamList();t.fptrParams=e}}else this.pos=n,this.skipBalancedParens();if(this.expect(e.RParen),this.skipArrayDimensions(),this.peek()===e.LParen){t.isFuncPtr=!0;let[e]=this.parseParamList();t.fptrParams=e}return r}return this.pos=n,null},F.prototype.extractParenName=function(){if(this.peek()!==e.LParen){if(this.peek()===e.Identifier){let e=this.peekValue();return this.advance(),e}return null}this.advance(),this.peek()===e.Star&&(this.advance(),this.skipCvQualifiers());let t;return this.peek()===e.LParen?t=this.extractParenName():this.peek()===e.Identifier?(t=this.peekValue(),this.advance()):t=null,this.consumeIf(e.RParen),t},F.prototype.tryParseParenAbstractDeclarator=function(){if(this.peek()!==e.LParen)return null;let t=this.pos;this.advance();let n=0;for(this.skipGccExtensions();this.consumeIf(e.Star);)n++,this.skipCvQualifiers(),this.skipGccExtensions();if(this.peek()===e.LParen){let r=this.tryParseParenAbstractDeclarator();if(r!==null)if(r.kind===`Simple`){let i=r.ptrDepth,a=r.arrayDims;if(this.peek()===e.LParen){let[r,a]=this.parseParamList();return this.consumeIf(e.RParen)?{kind:`NestedFnPtr`,outerPtrDepth:n,innerPtrDepth:i,innerParams:r,innerVariadic:a}:(this.pos=t,null)}let o=n+i,s=[...a];for(;this.peek()===e.LBracket;){this.advance();let t=null;this.peek()!==e.RBracket&&(t=this.parseExpr()),this.expect(e.RBracket),s.push(t)}return this.consumeIf(e.RParen)?{kind:`Simple`,ptrDepth:o,arrayDims:s}:(this.pos=t,null)}else if(this.consumeIf(e.RParen))return r;else return this.pos=t,null;else return this.pos=t,null}let r=[];for(;this.peek()===e.LBracket;){this.advance();let t=null;this.peek()!==e.RBracket&&(t=this.parseExpr()),this.expect(e.RBracket),r.push(t)}return this.consumeIf(e.RParen)&&(n>0||r.length>0)?{kind:`Simple`,ptrDepth:n,arrayDims:r}:(this.pos=t,null)};function ne(e,t){let n=new F(new f(e,t?.gnuExtensions??!0).scan()),r={start:{line:1,column:0},end:{line:1,column:0}},i=[];for(;!n.atEof();){let e=n.parseExternalDecl();e===null?n.atEof()||n.advance():i.push(e)}return{type:`TranslationUnit`,decls:i,start:0,end:e.length,loc:r}}self.onmessage=e=>{let{id:t,source:n,options:r}=e.data,i=performance.now();try{let e={type:`success`,id:t,ast:ne(n,r),elapsed:performance.now()-i};self.postMessage(e)}catch(e){let n=performance.now()-i,r={type:`error`,id:t,error:{message:e instanceof Error?e.message:String(e)},elapsed:n};self.postMessage(r)}}})();